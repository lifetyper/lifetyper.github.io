{"version": "https://jsonfeed.org/version/1", "title": "LifeTyper", "items": [{"id": "tag:None,2019-04-24:posts/access_remote_lan_through_zerotier.html", "url": "posts/access_remote_lan_through_zerotier.html", "title": "\u57fa\u4e8eZeroTier\u548cOpenwrt\u8def\u7531\u5668\u7684\u5185\u7f51\u4e92\u8bbf\u65b9\u6848", "content_html": "<h2>\u65b9\u6848\u9009\u62e9</h2>\n<p>\u73b0\u5728\u7528\u7684\u65b9\u6848\u91cc\uff0c\u65e0\u975e\u662f\u4e24\u79cd\uff0c\u4e00\u79cd\u662f\u50cf<a href=\"https://github.com/fatedier/frp/\">FRP</a>\u8fd9\u6837\u7684\u57fa\u4e8e\u516c\u7f51\u670d\u52a1\u5668\u8fdb\u884c\u7aef\u53e3\u8f6c\u53d1\u7684\uff0c\u8fd9\u4e2a\u6709\u4e00\u4e2a\u95e8\u69db\u662f\u5fc5\u987b\u6709\u4e00\u4e2a\u516c\u7f51VPS\uff0c\u901f\u5ea6\u8981\u5feb\u7684\u8bdd\u81ea\u7136\u662f\u56fd\u5185VPS\u6700\u597d\uff0c\u4f46\u56fd\u5185\u7684VPS\u5e26\u5bbd\u4ef7\u683c\u5374\u662f\u6700\u8d35\u7684\u3002\u800c\u4e14\u5f53\u4f60\u9700\u8981\u8f6c\u53d1\u591a\u4e2a\u540c\u7c7b\u578b\u670d\u52a1\u65f6\uff0c\u8fd8\u9700\u8981\u8bb0\u5fc6\u4e00\u5927\u5806\u7684\u7aef\u53e3\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u4e0d\u652f\u6301\u81ea\u5b9a\u4e49\u7aef\u53e3\u7684app\u6765\u8bf4\u66f4\u662f\u75db\u82e6\u3002</p>\n<p>\u53e6\u4e00\u79cd\u5c31\u662f\u7c7b\u4f3cn2n\u6216\u8005<a href=\"https://zerotier.com/\">zerotier</a>\u8fd9\u6837\u7684\u6253\u6d1e\u65b9\u5f0f\uff0c\u672c\u8d28\u662f\u5229\u7528\u4e2d\u8f6c\u670d\u52a1\u5668\u7275\u7ebf\uff0c\u6700\u7ec8\u5efa\u7acb\u4e8c\u8005\u95f4\u7684\u76f4\u8fde\uff0c\u800c\u4e14zerotier\u5728\u76f4\u8fde\u5931\u8d25\u7684\u60c5\u51b5\u4e0b\u4f9d\u7136\u53ef\u4ee5\u63d0\u4f9b\u4e2d\u8f6c\u670d\u52a1\uff0c\u7a33\u5b9a\u6027\u548c\u901f\u5ea6\u90fd\u5f88\u4f18\u79c0\u3002\u5b9e\u9645\u6d4b\u4e0b\u6765\u4ece\u516c\u53f8\u5230\u5bb6\u91cc\u7684\u7f51\u7edc\u95f4\u5ef6\u8fdf\u5927\u7ea6\u53ea\u670910ms\uff0c\u6392\u6389\u5404\u7ea7\u7f51\u7edc\u8bbe\u5907\u672c\u8eab\u7684\u5ef6\u8fdf\uff0c\u5e94\u8be5\u5c31\u662f\u76f4\u8fde\u4e86\u3002</p>\n<h2>\u7f51\u7edc\u62d3\u6251\u548c\u6700\u7ec8\u6548\u679c</h2>\n<p>\u76ee\u524d\u6211\u5728\u516c\u53f8\u548c\u5bb6\u91cc\u7684\u7f51\u7edc\u60c5\u51b5\u5982\u4e0b\n<img alt=\"Zerotier network topo\" src=\"images/zt_network_topo.jpg\">\n\u5f53\u7136\uff0c\u516c\u53f8\u662f\u6211\u81ea\u5df1\u63a5\u4e86\u4e00\u7ea7\u8def\u7531\u540e\u7684\u7ed3\u679c\uff0c\u6bd5\u7adf\u516c\u53f8\u7684\u8def\u7531\u5668\u4e0d\u53d7\u6211\u63a7\u5236\u3002\u6211\u5728\u516c\u53f8\u7684\u5185\u7f51\u7f51\u6bb5\u662f192.168.88.0/24,\u5728\u5bb6\u7684\u5185\u7f51\u7f51\u6bb5\u662f192.168.99.0/24\uff0c\u6700\u7ec8\u7684\u6548\u679c\u5c31\u662f\u6211\u5728\u516c\u53f8\u53ef\u4ee5\u76f4\u63a5\u7528IP\u8bbf\u95ee192.168.99.0/24\u7f51\u6bb5\u7684\u8bbe\u5907\uff0c\u5728\u5bb6\u53ef\u4ee5\u7528IP\u76f4\u63a5\u8bbf\u95ee192.168.88.0/24\u7f51\u6bb5\u7684\u8bbe\u5907\uff0c\u770b\u8d77\u6765\u5c31\u50cf\u4e24\u4e2a\u7f51\u6bb5\u88ab\u7269\u7406\u6865\u63a5\u5728\u4e00\u8d77\u4e00\u6837\uff0c\u5b8c\u5168\u5c31\u662f\u4e2a\u865a\u62df\u5c40\u57df\u7f51\u3002</p>\n<p>\u6ce8\u610f\uff0c\u4e24\u5730\u7684\u5c40\u57df\u7f51\u7f51\u6bb5\u4e0d\u80fd\u4e00\u6837\uff0c\u5426\u5219\u540e\u9762\u6ca1\u6cd5\u641e\uff0c\u8fde\u8def\u7531\u8868\u90fd\u6ca1\u6cd5\u5199\u3002</p>\n<h2>\u4f7f\u7528\u7684\u8bbe\u5907\u548c\u670d\u52a1</h2>\n<p>\u4e24\u53f0\u5237\u4e86lede\u5e76\u6709zerotier\u63d2\u4ef6\u7684\u8def\u7531\u5668\uff0c\u6ce8\u518c\u4e00\u4e2azerotier\u8d26\u53f7\uff0c\u786c\u4ef6\u8981\u6c42\u5c31\u8fd9\u4e48\u591a\u4e86\u3002</p>\n<p>\u5176\u4ed6\u95e8\u69db\uff1a\u667a\u5546\u3002</p>\n<h2>\u914d\u7f6ezerotier\u8d26\u53f7</h2>\n<p>\u8d26\u53f7\u672c\u8eab\u6ca1\u4ec0\u4e48\uff0c\u5c31\u662f\u6ce8\u518c\u767b\u9646\u540e\u5efa\u7acb\u4e00\u4e2azerotier\u7f51\u7edc\uff0c\u8fd9\u91cc\u5efa\u8bae\u8bbe\u7f6e\u6210private network\uff0c\u8fd9\u6837\u522b\u4eba\u5c31\u4e0d\u80fd\u968f\u4fbf\u52a0\u5165\u4e86\u3002</p>\n<h3>\u6388\u6743\u81ea\u5df1\u7684\u63a5\u5165\u70b9</h3>\n<p>\u56e0\u4e3a\u8bbe\u7f6e\u6210\u4e86private network\uff0c\u6240\u4ee5\u9ed8\u8ba4\u662f\u65e0\u6cd5\u52a0\u5165\u8fd9\u4e2a\u7f51\u7edc\u7684\uff0c\u4f46\u4f60\u53ef\u4ee5\u5728zerotier\u7684<a href=\"https://my.zerotier.com/network/\">\u7f51\u7edc\u7ba1\u7406\u754c\u9762</a>\u770b\u5230\u54ea\u4e9b\u70b9\uff0c\u7136\u540e\u5728auth\u4e0a\u52fe\u9009\u4e00\u4e0b\uff0c\u5c31\u6388\u6743\u4e86\u8fd9\u4e2a\u70b9\u63a5\u5165\u4e86\u3002</p>\n<h3>\u8bbe\u7f6e\u5206\u914dIP\u7684\u7f51\u6bb5</h3>\n<p>\u5176\u5b9e\u4e0d\u8bbe\u7f6e\u6839\u672c\u6ca1\u95ee\u9898\uff0c\u4f60\u53ea\u8981\u8bbe\u7f6e\u597d\u8def\u7531\u8868\u4fdd\u8bc1\u5206\u914d\u7684\u7f51\u6bb5\u8303\u56f4\u90fd\u5212\u5206\u5230\u540c\u4e00\u4e2alan\u5c31\u884c\u3002\u6211\u8fd9\u4e2a\u7eaf\u7cb9\u662f\u5f3a\u8feb\u75c7\u800c\u5df2\uff0c\u4f60\u4eec\u53ef\u4ee5\u4e0d\u8bbe\u7f6e\uff0c\u4f46\u5982\u679c\u62c5\u5fc3\u6709\u4ec0\u4e48\u7075\u5f02\u4e8b\u60c5\u53d1\u751f\u5bfc\u81f4\u4e0d\u597d\u89e3\u91ca\u7684\u8bdd\uff08\u6709\u4ec0\u4e48\u4e0d\u597d\u89e3\u91ca\u7684\uff0c\u5c31\u662f\u4f60\u8def\u7531\u8868\u9519\u4e86\u5457\uff09\uff0c\u8bbe\u7f6e\u6210\u540c\u4e00\u4e2aC\u6bb5\u5427\uff0c\u53cd\u6b63\u6700\u540e\u4f60\u4e24\u5730\u7684IP\u8981\u80fd\u4e92\u76f8ping\u901a\u5c31\u884c\u3002</p>\n<p>\u53cd\u6b63\u6211\u8fd9\u91cc\u8bbe\u7f6e\u6210\u4e8610.242.100.1~10.242.100.254\uff0c\u4fdd\u8bc1\u8fd9\u4e2aIP\u6bb5\u4e0d\u548c\u4f60\u4e24\u7aef\u4efb\u610f\u4e00\u6bb5\u8def\u7531\u5668\u7684LAN IP\u6bb5\u51b2\u7a81\u5c31\u884c\u3002</p>\n<h3>\u8bbe\u7f6ezerotier\u7684\u8def\u7531\u8868</h3>\n<p>\u8fd9\u4e2a\u662f\u6700\u91cd\u8981\u7684\u5730\u65b9\uff0c\u53c2\u8003\u6211\u4e0a\u9762\u7684\u7f51\u7edc\u62d3\u6251\uff0c\u6211\u7684\u8def\u7531\u8868\u5982\u4e0b\uff1a</p>\n<div class=\"highlight\"><pre><span></span>10.242.0.0/16 (LAN)\n192.168.88.0/24 via 10.242.100.216\n192.168.99.0/24 via 10.242.100.121\n</pre></div>\n\n\n<p>\u7b2c\u4e00\u4e2a\u8868\u793a10.242.0.0/16\u8fd9\u662f\u540c\u4e00\u4e2a\u5c40\u57df\u7f51\uff0c\u4f60\u4eec\u5206\u914dIP\u5728\u8fd9\u4e2a\u8303\u56f4\u7684\u76f4\u8fde\u5c31\u884c\u4e86\uff0c\u4e0d\u7528\u8fc7\u522b\u7684\u7f51\u5173\u4e86\u3002</p>\n<p>\u7b2c\u4e8c\u6761\u4e5f\u5f88\u597d\u7406\u89e3\uff0c\u516c\u53f8\u7684\u8def\u7531\u5668\u540e\u7f51\u6bb5\u662f192.168.88.0/24\uff0c\u800c\u516c\u53f8\u8def\u7531\u5668\u4e0a\u7684zerotier\u5206\u914d\u5230\u7684IP\u662f10.242.100.216(\u8fd9\u4e2a\u53ef\u4ee5\u5728zerotier\u7f51\u7ad9\u67e5\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7ifconfig\u547d\u4ee4\u5728\u8def\u7531\u5668\u67e5)\uff0c\u90a3\u4e48zerotier\u5c40\u57df\u7f51\u5185\u7684\u5176\u4ed6IP\u8981\u8bbf\u95ee\u8fd9\u4e2a192.168.88.0/24\u7f51\u6bb5\u7684\u8bdd\uff0c\u81ea\u7136\u8981\u901a\u8fc710.242.100.216\u4f5c\u4e3a\u7f51\u5173\u3002</p>\n<p>\u7b2c\u4e09\u6761\u5c31\u5b8c\u5168\u662f\u7b2c\u4e8c\u6761\u7684\u5bb6\u5ead\u7248\uff0c\u4e0d\u89e3\u91ca\u4e86\u3002</p>\n<p>\u6ce8\u610f\uff0c\u8fd9\u4e2a\u53ea\u662f\u544a\u8bc9\u4e86zerotier\u5c40\u57df\u7f51\u5185\u7684\u8def\u7531\u8868\uff0c\u4f46\u8fd9\u4e2a\u8def\u7531\u8868\u5e76\u4e0d\u4f1a\u5e7f\u64ad\u5230\u4f60\u7684\u8def\u7531\u5668\u4e0a\uff0c\u4f60\u5fc5\u987b\u5728\u8def\u7531\u5668\u4e0a\u8bbe\u7f6e\u597d\u624d\u884c\u3002</p>\n<h2>\u8def\u7531\u5668\u7684\u8bbe\u7f6e</h2>\n<h3>\u542f\u52a8\u5e76\u8fde\u63a5zerotier</h3>\n<p>\u8fd9\u4e2a\u7b80\u5355\u5230\u7206\uff0c\u770b\u56fe\n<img alt=\"config_zerotier_on_lede\" src=\"images/config_zerotier_on_lede.png\">\n\u52fe\u9009\u542f\u7528\uff0c\u586b\u5165\u4f60\u7684zerotier nerwork ID\uff0c\u52fe\u9009\u5141\u8bb8\u81ea\u52a8NAT\uff0c\u4fdd\u5b58\u5e94\u7528\uff0c\u641e\u5b9a\u3002</p>\n<h3>\u67e5\u770bZerotier\u7684\u72b6\u6001</h3>\n<p>\u9996\u5148\u662f\u67e5\u770bzerotier\u865a\u62df\u7f51\u5361\u7684\u540d\u79f0\uff0c\u76f4\u63a5\u5728\u8def\u7531\u5668\u4e0a\u8f93\u5165ifconfig\u547d\u4ee4\uff0c\u770b\u5230\u4e00\u4e2azt\u5f00\u5934\u7684\u5c31\u662fzerotier\u7684\u865a\u62df\u7f51\u5361\u4e86\uff0c\u6211\u8fd9\u91cc\u7684\u662f\uff1aztzlgmpcam\u3002</p>\n<p>\u5343\u4e07\u4e0d\u8981\u50bb\u903c\u516e\u516e\u76f4\u63a5\u6284\uff0c\u7b97\u6211\u63d0\u524d\u6c42\u4f60\u4eec\u4e86\uff0c\u4e0d\u5bf9\uff0c\u4e0d\u7528\u6c42\uff0c\u53cd\u6b63\u6211\u8fd9\u91cc\u4e0d\u652f\u6301\u8bc4\u8bba\uff0c\u4f60\u4eec\u8981\u81ea\u5df1\u6316\u5751\u5c31\u81ea\u5df1\u8df3\u3002</p>\n<p>\u53e6\u5916\uff0cifconfig\u547d\u4ee4\u4e5f\u53ef\u4ee5\u770b\u5230\u8fd9\u4e2a\u865a\u62df\u7f51\u5361\u662f\u5426\u5206\u914d\u5230\u4e86IP\uff0c\u8fd9\u4e2a\u53ef\u4ee5\u544a\u77e5\u4f60zerotier\u662f\u5426\u6210\u529f\u8fde\u4e0a\u4e86\u865a\u62df\u5c40\u57df\u7f51\u3002</p>\n<p>\u5982\u679c\u4f60\u7684\u8fd9\u53f0\u8def\u7531\u5668\u4eceZerotier\u5206\u914d\u5230\u4e86IP A,\u800c\u8fdc\u7aef\u7684\u8def\u7531\u5668\u5206\u914d\u5230\u4e86IP B\uff0c\u90a3\u4e48\u8fd9\u4e2a\u65f6\u5019\u4f60\u4ece\u4e24\u7aef\u4e92\u76f8ping\u8fd9\u4e2a\u5206\u914d\u7684IP\u5e94\u8be5\u662f\u53ef\u4ee5ping\u901a\u7684\u3002</p>\n<h3>\u8bbe\u7f6e\u8def\u7531\u8868</h3>\n<p>\u8fd9\u53ef\u80fd\u662f\u552f\u4e00\u6709\u70b9\u6280\u672f\u542b\u91cf\u7684\u90e8\u5206\u4e86\uff0c\u6211\u4eec\u4e0a\u9762\u8bf4\u4e86\uff0czerotier\u7f51\u7ad9\u4e0a\u8bbe\u7f6e\u7684\u8def\u7531\u8868\u5e76\u4e0d\u4f1a\u5e7f\u64ad\u5230\u8def\u7531\u5668\u4e0a\uff0c\u7ecf\u5178\u53f0\u8bcd\uff1a\u8def\u600e\u4e48\u8d70\uff0c\u4f60\u4eec\u81ea\u5df1\u9009\u3002</p>\n<p>Update:\u5176\u5b9e\u8fd9\u4e2a\u539f\u6765\u662f\u65e7\u7248\u672c\u7684zerotier openwrt\u63d2\u4ef6\u7684\u4e00\u4e2a\u529f\u80fd\u7f3a\u5931\uff0c\u73b0\u5728\u5df2\u7ecf\u4fee\u590d\u4e86\uff0c\u6240\u4ee5\u5176\u5b9e\u73b0\u5728\u5e76\u4e0d\u9700\u8981\u81ea\u5df1\u518d\u6dfb\u52a0\u8def\u7531\u8868\u4e86\uff0c\u6240\u4ee5\u5230\u8fd9\u91cc\u5176\u5b9e\u5de5\u4f5c\u5df2\u7ecf\u5b8c\u6210\u4e86\uff0c\u4e0b\u9762\u4e0d\u7528\u518d\u770b\u4e86\u3002</p>\n<p>\u800c\u4e14\u9759\u6001\u8def\u7531\u8868\u672c\u6765\u5c31\u4e0d\u662f\u6700\u5408\u7406\u7684\u505a\u6cd5\uff0c\u56e0\u4e3a\u63a5\u53e3\u5982\u679c\u65ad\u5f00\u7684\u8bdd\uff0c\u8def\u7531\u8868\u662f\u65e0\u6548\u7684\uff0c\u4f46\u4e5f\u4e0d\u4f1a\u6709\u4ec0\u4e48\u95ee\u9898\uff0c\u56e0\u4e3a\u4e0d\u80fd\u8bbf\u95ee\u8fd8\u662f\u4e0d\u80fd\u8bbf\u95ee\uff0c\u5e76\u4e0d\u4f1a\u6709\u4ec0\u4e48\u989d\u5916\u7684\u95ee\u9898\u3002\u73b0\u5728\u65b0\u7248\u7684\u63d2\u4ef6\u4e2d\uff0c\u5e94\u8be5\u662f\u5728ifup\u548cifdown\u7684\u811a\u672c\u4e2d\u52a8\u6001\u6dfb\u52a0\u548c\u5220\u9664\u8def\u7531\u8868\u4e86\uff0c\u8fd9\u4e2a\u624d\u662f\u6b63\u786e\u7684\u505a\u6cd5\u3002</p>\n<h4>\u52a8\u6001\u7248\u672c</h4>\n<p>\u53ef\u4ee5\u5148\u7528ip\u547d\u4ee4\u6dfb\u52a0\u4e00\u4e0b\uff0c\u6d4b\u8bd5\u4e00\u4e0b\u662f\u5426\u6210\u529f\uff0c\u4f8b\u5982\u6211\u4eec\u5728\u516c\u53f8\u7684\u8def\u7531\u5668\u4e0a\uff0c\u8981\u8bbf\u95ee\u5bb6\u91cc\u7684192.168.99.0/24\u7f51\u6bb5\uff0c\u5bb6\u91cc\u7684\u8def\u7531\u5668\u5206\u914d\u7684zerotier IP\u662f10.242.100.121\uff0c\u90a3\u4e48\u547d\u4ee4\u662f\uff1a</p>\n<div class=\"highlight\"><pre><span></span>ip route add 192.168.99.0/24 via 10.242.100.121\n</pre></div>\n\n\n<p>\u4f7f\u7528route\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u5230\u8fd9\u6837\u4e00\u6761route\u8bb0\u5f55</p>\n<div class=\"highlight\"><pre><span></span>Kernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n192.168.99.0    10.242.100.121  255.255.255.0   UG    0      0        0 ztzlgmpcam\n</pre></div>\n\n\n<p>\u7c7b\u4f3c\u7684\uff0c\u5728\u5bb6\u91cc\u7684\u8def\u7531\u5668\u6dfb\u52a0\u4e00\u6761\u5230\u516c\u53f8192.168.88.0/24\u7f51\u6bb5\u7684\u8def\u7531\u8868:</p>\n<div class=\"highlight\"><pre><span></span>ip route add 192.168.88.0/24 via 10.242.100.216\n</pre></div>\n\n\n<p>\u6dfb\u52a0\u540e\u7528route\u547d\u4ee4\u5e94\u8be5\u770b\u5230\u8fd9\u6837\u7684\u4e00\u6761\u8def\u7531\u8868\uff1a</p>\n<div class=\"highlight\"><pre><span></span>Kernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n192.168.88.0    10.242.100.216  255.255.255.0   UG    0      0        0 ztzlgmpcam\n</pre></div>\n\n\n<p>\u8fd9\u4e2a\u65f6\u5019\uff0c\u4ece\u53cc\u65b9\u5c40\u57df\u7f51\u7684\u4efb\u4f55\u4e00\u53f0\u8bbe\u5907\uff0c\u90fd\u5e94\u8be5\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u53cc\u65b9\u5c40\u57df\u7f51\u7684\u4efb\u610f\u4e00\u4e2aIP\u4e86\u3002</p>\n<h4>\u56fa\u5316\u7248\u672c</h4>\n<p>\u4e0a\u9762\u7684ip route\u547d\u4ee4\u867d\u7136\u6765\u5f97\u5feb\uff0c\u4f46\u4e00\u91cd\u542f\u5c31\u6ca1\u4e86\uff0c\u6700\u7a33\u59a5\u7684\u662f\u76f4\u63a5\u5199\u5165config\u6587\u4ef6\u91cc\u3002\u7f16\u8f91/etc/config/network\u6587\u4ef6\uff0c\u516c\u53f8\u7248\u672c\u7684\u5199\u6cd5,\u5728\u6587\u4ef6\u6700\u672b\u5c3e\u6dfb\u52a0\uff1a</p>\n<div class=\"highlight\"><pre><span></span>config route\n    option interface &#39;ztzlgmpcam&#39;\n    option target &#39;192.168.99.0/24&#39;\n    option gateway &#39;10.242.100.121&#39;\n</pre></div>\n\n\n<p>\u5bb6\u5ead\u7248\u672c\u7684\u5199\u6cd5\uff0c\u6dfb\u52a0\uff1a</p>\n<div class=\"highlight\"><pre><span></span>config route\n    option interface &#39;ztzlgmpcam&#39;\n    option target &#39;192.168.88.0/24&#39;\n    option gateway &#39;10.242.100.216&#39;\n</pre></div>\n\n\n<p>\u540c\u6837\u7684\uff0c\u6839\u636e\u4f60\u7684\u5b9e\u9645\u60c5\u51b5\uff0c\u66ff\u6362interface\u4e3a\u4f60\u7684zerotier\u865a\u62df\u7f51\u5361\u7684\u540d\u79f0\uff0c\u4ee5\u53ca\u540e\u9762\u7684\u76ee\u6807\u7f51\u6bb5\uff0c\u548c\u76ee\u6807\u7f51\u6bb5\u4e0a\u7684\u8def\u7531\u5668\u5206\u914d\u5230\u7684zerotier IP\u3002</p>\n<p>\u7136\u540e/etc/init.d/network restart\u5c31\u53ef\u4ee5\u751f\u6548\u4e86\uff0c\u8fd9\u6837\u7684\u8def\u7531\u8868\u91cd\u542f\u540e\u662f\u4e0d\u4f1a\u4e22\u5931\u7684\u3002</p>\n<h2>\u540e\u8bb0</h2>\n<p>\u5176\u5b9e\u60f3\u60f3\u770b\uff0c\u8fd9\u4e2a\u65b9\u6848\u5e76\u4e0d\u4e00\u5b9a\u9700\u8981ZeroTier\uff0c\u4efb\u4f55\u4f60\u53ef\u4ee5\u81ea\u5df1\u914d\u7f6e\u8def\u7531\u8868\u7684VPN\u90fd\u662f\u53ef\u4ee5\u7684\uff0c\u53ea\u662f\u5176\u4ed6\u7684VPN\u65b9\u6848\u6700\u7ec8\u90fd\u662f\u8981\u8fc7\u670d\u52a1\u5668\u7ed5\u4e00\u5708\uff0c\u5e76\u4e0d\u4e00\u5b9a\u80fd\u5145\u5206\u53d1\u6325\u6700\u5927\u7684\u5e26\u5bbd\uff0c\u4e14\u7a33\u5b9a\u6027\u53d7\u9650\u4e8e\u670d\u52a1\u5668\u3002</p>", "description": "\u76f8\u4fe1\u8fd9\u4e2a\u6807\u9898\u5c31\u5df2\u7ecf\u5f88\u5438\u5f15\u4eba\u4e86\uff0c\u56e0\u4e3a\u5f88\u591a\u4eba\u90fd\u6709\u7c7b\u4f3c\u7684\u9700\u6c42\uff0c\u5728\u5bb6\u91cc\u8bbf\u95ee\u516c\u53f8\u670d\u52a1\u5668\u6216\u5de5\u4f5c\u673a\u7684\u5185\u5bb9\uff0c\u5728\u516c\u53f8\u8bbf\u95ee\u5bb6\u91cc\u670d\u52a1\u5668\u7684\u6570\u636e\uff0c\u672c\u6587\u8ba8\u8bba\u7684\u5c31\u662f\u8fd9\u4e2a\u76ee\u7684\u7684\u5b9e\u73b0\u3002", "date_published": "2019-04-24T17:11:30+08:00"}, {"id": "tag:None,2019-03-27:posts/use_ssr_to_redirect_mtproto_proxy_inside_gfw.html", "url": "posts/use_ssr_to_redirect_mtproto_proxy_inside_gfw.html", "title": "\u5229\u7528SSR\u5728\u56fd\u5185\u670d\u52a1\u5668\u8f6c\u53d1Telegram\u7684MTProxy\u4ee3\u7406", "content_html": "<h2>\u7cdf\u7cd5\u7684\u80cc\u666f\u8bf4\u660e</h2>\n<p>\u6700\u8fd1\u8fd9\u6bb5\u65f6\u95f4\uff0cTelegram\u7684<a href=\"https://github.com/TelegramMessenger/MTProxy\">MTProxy</a>\u53ef\u4ee5\u8bf4\u51e0\u4e4e\u662f\u88ab\u5224\u4e86\u6b7b\u5211\uff0c\u539f\u56e0\u65e0\u5916\u4e4e\u662f<a href=\"https://github.com/TelegramMessenger/MTProxy#random-padding\">MTProxy\u7684\u6570\u636e\u5305\u5927\u5c0f\u7279\u5f81\u592a\u660e\u663e</a>\uff0c\u6781\u5176\u5bb9\u6613\u88ab\u5206\u6790\u51fa\u6765\u3002\u867d\u7136\u5b98\u65b9\u52a0\u5165\u4e86Random Padding\u8fd9\u4e2a\u529f\u80fd\u8bd5\u56fe\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4f46\u6548\u679c\u5176\u5b9e\u975e\u5e38\u53ef\u601c\uff0c\u6211\u6362\u5b8c\u7aef\u53e3\u540e\u5f00\u542f\u4e86Random Padding\uff0c\u54ea\u6015\u53ea\u6709\u6211\u4e00\u4e2a\u4eba\u5728\u7528\u8fd9\u4e2a\u4ee3\u7406\uff0c\u4f9d\u7136\u572812\u5c0f\u65f6\u5185\u88ab\u5c01\u6389\u3002</p>\n<p>\u73b0\u5728\u666e\u904d\u7684\u5efa\u8bae\u662f\u5728\u56fd\u5185\u642d\u9700\u8981\u9274\u6743\u7684socks5\u670d\u52a1\u5668\uff0c\u8fd9\u4e2a\u6280\u672f\u4e0a\u6ca1\u6709\u95ee\u9898\uff0c\u4f46\u5982\u679c\u4f60\u8981\u5206\u4eab\u51fa\u53bb\u7684\u8bdd\uff0c\u4e00\u4e2asocks5\u4ee3\u7406\u53ef\u4ee5\u505a\u7684\uff0c\u53ef\u4e0d\u4ec5\u4ec5\u662fMTProxy\u8fd9\u4e48\u7b80\u5355\uff0c\u9700\u8981\u627f\u62c5\u7684\u98ce\u9669\u4f1a\u5927\u5f97\u591a\u3002</p>\n<p>\u8fd9\u79cd\u60c5\u51b5\uff0c\u8981\u4e48\u4e0a\u4e13\u7ebf\u642dMTProxy\uff0c\u8981\u4e48\u5c31\u7528\u66f4\u4e0d\u5bb9\u6613\u88ab\u5c01\u7684\u624b\u6bb5\u8f6c\u53d1\u8fd9\u4e2a\u4ee3\u7406\u670d\u52a1\uff0c\u4e0d\u7ba1\u662fv2\u8fd8\u662fssr\uff0c\u8fd9\u4e2a\u4f60\u6839\u636e\u81ea\u5df1\u7684\u7231\u597d\u9009\u62e9\uff0c\u6211\u4e60\u60ef\u6027\u7684\u8fd8\u662f\u7528ssr\u3002</p>\n<h2>\u5728\u56fd\u5916VPS\u5efa\u7acb\u4e00\u4e2a\u8df3\u677f\u4ee3\u7406</h2>\n<p>\u5bf9\u6211\u6765\u8bf4\uff0c\u8fd9\u5c31\u662f\u4e00\u53f0\u88c5\u4e86SSR\u7684\u56fd\u5916VPS\u800c\u5df2\u3002</p>\n<h2>\u5728\u56fd\u5185VPS\u5efa\u7acb\u4e00\u4e2a\u900f\u660e\u4ee3\u7406</h2>\n<p>\u6211\u4eec\u4ee5ssr\u4e3a\u4f8b\uff0c\u8fd9\u91cc\u9700\u8981\u7528\u5230\u7684\u662fss(r)-redir\uff0c\u800c\u4e0d\u662fss(r)-local\uff0c\u540e\u8005\u662f\u7528\u4e8e\u5efa\u7acbsocks5\u4ee3\u7406\u7684\uff0c\u800c\u524d\u8005\u624d\u662f\u6211\u4eec\u6240\u9700\u8981\u7684\u900f\u660e\u4ee3\u7406\u3002\u5177\u4f53\u7684\u5efa\u7acb\u8fc7\u7a0b\u5c31\u4e0d\u591a\u8bf4\u4e86\uff0c\u65e0\u975e\u5c31\u662fss-redir -c config.json\u4e86\uff0c\u8fd9\u91cc\u6211\u8bbe\u5b9a\u7684\u672c\u5730\u4ee3\u7406\u7aef\u53e3\u662f127.0.0.1:1080\u3002\u6ce8\u610f\uff0c\u4e0d\u8981\u5f00\u653e\u52300.0.0.0\u4e0a\uff0c\u5426\u5219\u4f60\u7684\u900f\u660e\u4ee3\u7406\u53ef\u80fd\u4f1a\u88ab\u6ee5\u7528\u7684\u3002</p>\n<h2>\u5efa\u7acb\u8f6c\u53d1\u89c4\u5219</h2>\n<p>\u6839\u636ehostloc\u8bba\u575b\u7f51\u53cb\u7684\u5efa\u8bae\uff0c\u53ea\u9700\u8981\u627e\u51faTelegram\u76843\u4e2aASN\u6240\u5bf9\u5e94\u7684IP\uff0c\u628a\u56fd\u5185VPS\u5230\u8fd9\u4e9bIP\u7684\u6d41\u91cf\u5168\u90e8\u8f6c\u53d1\u5230ss-redir\u4ea7\u751f\u7684\u900f\u660e\u4ee3\u7406\u4e0a\u5c31\u884c\u4e86\u3002</p>\n<p>\u5199\u4e86\u4e2a\u811a\u672c\u628a\u8fd9\u4e9bIP\u62d4\u4e0b\u6765\u7136\u540e\u8f6c\u6210bash\u811a\u672c\uff1a</p>\n<div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">requests</span>\n<span class=\"kn\">import</span> <span class=\"nn\">json</span>\n\n<span class=\"n\">ip_range_urls</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s1\">&#39;https://api.bgpview.io/asn/59930/prefixes&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;https://api.bgpview.io/asn/62014/prefixes&#39;</span><span class=\"p\">,</span>\n                 <span class=\"s1\">&#39;https://api.bgpview.io/asn/62041/prefixes&#39;</span><span class=\"p\">]</span>\n\n<span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s1\">&#39;tg_ipset_redirect.sh&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;w&#39;</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">dst</span><span class=\"p\">:</span>\n    <span class=\"n\">dst</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s1\">&#39;#! /bin/bash</span><span class=\"se\">\\n</span><span class=\"s1\">&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">dst</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s1\">&#39;ipset create telegram hash:net -!</span><span class=\"se\">\\n</span><span class=\"s1\">&#39;</span><span class=\"p\">)</span>\n\n    <span class=\"k\">for</span> <span class=\"n\">url</span> <span class=\"ow\">in</span> <span class=\"n\">ip_range_urls</span><span class=\"p\">:</span>\n        <span class=\"n\">ip_data</span> <span class=\"o\">=</span> <span class=\"n\">json</span><span class=\"o\">.</span><span class=\"n\">loads</span><span class=\"p\">(</span><span class=\"n\">requests</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">content</span><span class=\"p\">)</span>\n        <span class=\"k\">for</span> <span class=\"n\">ip_range</span> <span class=\"ow\">in</span> <span class=\"n\">ip_data</span><span class=\"p\">[</span><span class=\"s1\">&#39;data&#39;</span><span class=\"p\">][</span><span class=\"s1\">&#39;ipv4_prefixes&#39;</span><span class=\"p\">]:</span>\n            <span class=\"n\">dst</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s1\">&#39;ipset add telegram {} -!</span><span class=\"se\">\\n</span><span class=\"s1\">&#39;</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">ip_range</span><span class=\"p\">[</span><span class=\"s1\">&#39;prefix&#39;</span><span class=\"p\">]))</span>\n\n    <span class=\"n\">dst</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span>\n        <span class=\"s1\">&#39;iptables -t nat -A PREROUTING -p tcp -m set --match-set telegram dst -j REDIRECT --to-ports 1080</span><span class=\"se\">\\n</span><span class=\"s1\">&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">dst</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span>\n        <span class=\"s1\">&#39;iptables -t nat -A OUTPUT -p tcp -m set --match-set telegram dst -j REDIRECT --to-ports 1080</span><span class=\"se\">\\n</span><span class=\"s1\">&#39;</span><span class=\"p\">)</span>\n</pre></div>\n\n\n<p>\u4ea7\u751f\u7684bash\u811a\u672c\u5982\u4e0b\uff1a</p>\n<table class=\"highlighttable\"><tr><td class=\"linenos\"><div class=\"linenodiv\"><pre> 1\n 2\n 3\n 4\n 5\n 6\n 7\n 8\n 9\n10\n11\n12\n13\n14</pre></div></td><td class=\"code\"><div class=\"highlight\"><pre><span></span><span class=\"ch\">#! /bin/bash</span>\nipset create telegram hash:net -!\nipset add telegram <span class=\"m\">91</span>.108.12.0/22 -!\nipset add telegram <span class=\"m\">149</span>.154.172.0/22 -!\nipset add telegram <span class=\"m\">91</span>.108.16.0/22 -!\nipset add telegram <span class=\"m\">91</span>.108.56.0/23 -!\nipset add telegram <span class=\"m\">149</span>.154.168.0/22 -!\nipset add telegram <span class=\"m\">91</span>.108.4.0/22 -!\nipset add telegram <span class=\"m\">91</span>.108.8.0/22 -!\nipset add telegram <span class=\"m\">91</span>.108.56.0/22 -!\nipset add telegram <span class=\"m\">149</span>.154.160.0/20 -!\nipset add telegram <span class=\"m\">149</span>.154.164.0/22 -!\niptables -t nat -A PREROUTING -p tcp -m <span class=\"nb\">set</span> --match-set telegram dst -j REDIRECT --to-ports <span class=\"m\">1080</span>\niptables -t nat -A OUTPUT -p tcp -m <span class=\"nb\">set</span> --match-set telegram dst -j REDIRECT --to-ports <span class=\"m\">1080</span>\n</pre></div>\n</td></tr></table>\n\n<p>\u8fd9\u4e48\u4e00\u770b\uff0c\u5f53\u521d\u8fd8\u5199\u4ec0\u4e48\u811a\u672c\uff0cIP\u6bb5\u4e5f\u6ca1\u51e0\u4e2a\u554a\uff0c\u5bb3\u5f97\u6211\u4e00\u5ea6\u4ee5\u4e3a\u811a\u672c\u5199\u9519\u4e86\uff0c\u662f\u4e0d\u662f\u6f0f\u4e86\u4ec0\u4e48IP\uff0c\u7ed3\u679c\u4e0a\u7f51\u7ad9\u4e00\u67e5\u8fd8\u771f\u5c31\u8fd9\u51e0\u4e2aIP\u6bb5\u3002\nBash\u811a\u672c\u5e94\u8be5\u90fd\u770b\u5f97\u61c2\u5427\uff0c\u5c31\u662f\u628atelegram\u7684IP\u52a0\u5165\u4e00\u4e2aipset\u4e2d(\u5f53\u7136\uff0c\u4f60\u5f97\u5148\u5b89\u88c5ipset\uff0c\u4e00\u822c\u9ed8\u8ba4\u90fd\u6ca1\u6709)\uff0c\u7136\u540e\u628a\u7b26\u5408tcp\u534f\u8bae\u7684\u3001\u540c\u65f6\u76ee\u7684IP\u5c5e\u4e8e\u8fd9\u4e2aipset\u5185\u7684\u6d41\u91cf\uff0c\u5168\u90e8\u8f6c\u53d1\u5230ss-redir\u4ea7\u751f\u76841080\u900f\u660e\u4ee3\u7406\u7aef\u53e3\u4e0a\u3002</p>\n<h2>\u5728\u56fd\u5185VPS\u5b89\u88c5MTProxy</h2>\n<p>\u4e0d\u77e5\u9053\u4e3a\u5565\uff0c\u5199\u8fd9\u7bc7\u6587\u7ae0\u7684\u65f6\u5019\uff0c\u7528\u5b98\u65b9\u7684MTProxy\u5728\u672c\u5730\u642d\u7684\u6d4b\u8bd5\u73af\u5883\u4e00\u76f4\u8fde\u4e0d\u4e0a\uff0c\u4e4b\u524d\u5728\u56fd\u5916VPS\u4e0a\u642d\u90fd\u662fOK\u7684\u3002\u8fd9\u6b21\u5e72\u8106\u76f4\u63a5\u6362\u6210\u4e86\u7eafpython3\u7248\u672c\u7684<a href=\"https://github.com/alexbers/mtprotoproxy\">mtprotoproxy</a>\uff0c\u8fd8\u7701\u53bb\u4e86build\u8fc7\u7a0b\u3002</p>\n<p>git clone\u4e0b\u6765\u540e\uff0c\u6539\u4e0b\u7aef\u53e3\u8bbe\u7f6e\u5c31\u884c\u4e86\u3002config.py\u91cc\u7684Users\uff0c\u5176\u5b9e\u5c31\u662f\u4e2a16\u4f4d\u7684\u968f\u673asecret\uff0c\u53ef\u4ee5\u7528\u4ee5\u4e0b\u547d\u4ee4\u4ea7\u751f\uff1a</p>\n<div class=\"highlight\"><pre><span></span>head -c 16 /dev/urandom | xxd -ps\n</pre></div>\n\n\n<p>\u4f60\u8fd8\u53ef\u4ee5\u914d\u7f6e\u591a\u4e2asecret\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u628asecret\u5f53Users\u6765\u7ba1\u7406\u4e86\uff0c\u867d\u7136\u6211\u76ee\u524d\u8fd8\u6ca1\u53d1\u73b0\u8fd9\u73a9\u610f\u6709\u4ec0\u4e48\u7ba1\u7406\u529f\u80fd\u3002</p>\n<p>\u5bf9\u4e8epython\u811a\u672c\u7684\u542f\u52a8\u7ba1\u7406\uff0c\u6211\u5411\u6765\u559c\u6b22\u8f6c\u4e2asupervisor\u641e\u5b9a\uff0c\u53ea\u9700\u8981\u5199\u4e2a\u914d\u7f6e\u6587\u4ef6\u5c31\u884c\u4e86:</p>\n<div class=\"highlight\"><pre><span></span>command=/usr/bin/python3 /root/.services/mtprotoproxy/mtprotoproxy.py\nstartsecs=1\nstartretries=100\nautorstart=true\nautorestart=true\n</pre></div>\n\n\n<p>\u5f53\u7136\uff0c\u6211\u5efa\u8bae\u4f60\u53ef\u4ee5\u5148\u624b\u5de5\u6267\u884c\u4ee5\u4e0b\u8fd9\u4e2a\u670d\u52a1\u5668\u547d\u4ee4\uff0c\u8fd9\u6837\u4f1a\u81ea\u52a8echo\u51fa\u4ea7\u751f\u7684MTProxy\u7684\u5730\u5740\uff0c\u7701\u7684\u4f60\u81ea\u5df1\u518d\u53bb\u4e00\u70b9\u70b9\u62fc\u8d77\u6765\u3002</p>\n<h2>\u56fa\u5316ipset\u548ciptables\u89c4\u5219</h2>\n<p>ipset\u548ciptables\u9ed8\u8ba4\u91cd\u542f\u540e\u5c31\u4f1a\u6389\u4e86\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u628a\u4ed6\u4eec\u4fdd\u5b58\u5230\u6587\u4ef6\uff1a</p>\n<div class=\"highlight\"><pre><span></span>ipset save &gt; /etc/ipset.conf\niptables-save  &gt; /etc/iptables.conf\n</pre></div>\n\n\n<p>\u7136\u540e\u5728/etc/rc.local\u91cc(\u5bf9\u5e94\u7684\u662fubuntu/debian\u7cfb\u7edf\uff0ccentos\u81ea\u5df1\u60f3\u529e\u6cd5)\uff0c\u5199\u5165\u4ece\u6587\u4ef6\u8fd8\u539fipset\u548ciptables\u7684\u547d\u4ee4\u5c31\u53ef\u4ee5\u4e86\uff1a</p>\n<table class=\"highlighttable\"><tr><td class=\"linenos\"><div class=\"linenodiv\"><pre>1\n2\n3\n4\n5\n6</pre></div></td><td class=\"code\"><div class=\"highlight\"><pre><span></span><span class=\"ch\">#!/bin/sh</span>\n\nipset restore &lt; /etc/ipset.conf\niptables-restore &lt; /etc/iptables.conf\n\n<span class=\"nb\">exit</span> <span class=\"m\">0</span>\n</pre></div>\n</td></tr></table>\n\n<p>ubuntu18\u9ed8\u8ba4\u6ca1\u6709/etc/rc.local\u6587\u4ef6\u4e86\uff0c\u81ea\u5df1\u521b\u5efa\u4e00\u4e2a\u5c31\u884c\uff0c\u8bb0\u5f97chomod +x /etc/rc.local\u7ed9\u5b83\u6dfb\u52a0\u53ef\u6267\u884c\u5c5e\u6027\u3002</p>", "description": "\u6700\u8fd1\u8fd9\u6bb5\u65f6\u95f4\uff0cTelegram\u7684MTProxy\u53ef\u4ee5\u8bf4\u51e0\u4e4e\u662f\u88ab\u5224\u4e86\u6b7b\u5211\uff0c\u539f\u56e0\u65e0\u5916\u4e4e\u662fMTProxy\u7684\u6570\u636e\u5305\u5927\u5c0f\u7279\u5f81\u592a\u660e\u663e\uff0c\u6781\u5176\u5bb9\u6613\u88ab\u5206\u6790\u51fa\u6765\u3002\u867d\u7136\u5b98\u65b9\u52a0\u5165\u4e86Random Padding\u8fd9\u4e2a\u529f\u80fd\u8bd5\u56fe\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4f46\u6548\u679c\u5176\u5b9e\u975e\u5e38\u53ef\u601c\uff0c\u6211\u6362\u5b8c\u7aef\u53e3\u540e\u5f00\u542f\u4e86Random Padding\uff0c\u54ea\u6015\u53ea\u6709\u6211\u4e00\u4e2a\u4eba\u5728\u7528\u8fd9\u4e2a\u4ee3\u7406\uff0c\u4f9d\u7136\u572812\u5c0f\u65f6\u5185\u88ab\u5c01\u6389\u3002", "date_published": "2019-03-27T22:50:54+08:00"}, {"id": "tag:None,2019-02-25:posts/multiuser_on_single_port_for_SSR_mudbjson.html", "url": "posts/multiuser_on_single_port_for_SSR_mudbjson.html", "title": "ShadowsocksR MudbJSON\u7248\u7684\u5355\u7aef\u53e3\u591a\u7528\u6237\u914d\u7f6e", "content_html": "<p>\u7f51\u4e0a\u6700\u65e9\u7684\u4e5f\u6700\u6743\u5a01\u7684\u5173\u4e8eSSR\u5355\u7aef\u53e3\u591a\u7528\u6237\u7684\u914d\u7f6e\u662f\u7834\u5a03\u9171\u5199\u7684\uff0c\u867d\u7136\u6587\u7ae0\u5df2\u7ecf\u88ab\u5220\u4e86\uff0c\u4f46\u7528<a href=\"http://web.archive.org/web/20170727124018/https://breakwa11.blogspot.com/2017/01/shadowsocksr-mu.html\">archive</a>\u8fd8\u662f\u53ef\u4ee5\u770b\u5230\u7684\uff0c\u53ea\u662f\u6587\u7ae0\u6709\u4e9b\u5730\u65b9\u5199\u7684\u8fd8\u4e0d\u591f\u7ec6\u81f4\uff0c\u5bb9\u6613\u4ea7\u751f\u8bef\u89e3\u3002\u6700\u8fd1\u81ea\u5df1\u521a\u597d\u4e5f\u5728\u5c1d\u8bd5\u8fd9\u4e2a\u914d\u7f6e\uff0c\u91cd\u65b0\u8bb0\u5f55\u5e76\u8bf4\u660e\u4e00\u4e0b\uff0c\u65b9\u4fbf\u4ee5\u540e\u67e5\u770b\u3002</p>\n<p>\u9996\u5148\u660e\u786e\u4e00\u4e0b\uff0c\u8fd9\u91cc\u53ea\u8ba8\u8bbaMudbJson\u7248\u7684\u5355\u7aef\u53e3\u591a\u7528\u6237\u914d\u7f6e\uff0c\u673a\u573a\u7528\u7684SSPanel\u4e0d\u5728\u6b64\u8ba8\u8bba\u8303\u56f4\u3002\u5176\u5b9eMudbJson\u662f\u4e00\u4e2a\u975e\u5e38\u9002\u5408\u5c11\u6570\u51e0\u4e2a\u4eba\u4e00\u8d77\u642d\u5efa\u5c0f\u673a\u573a\u7684\u914d\u7f6e\u65b9\u5f0f\uff0c\u5728\u4fdd\u8bc1\u591a\u7528\u6237\u7279\u6027\u7684\u60c5\u51b5\u4e0b\u6ca1\u6709\u591a\u4f59\u7684\u9644\u52a0\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u7ed9\u4e0d\u540c\u7528\u6237\u6570\u8bbe\u7f6e\u9650\u901f\u548c\u9650\u6d41\u91cf\u7b49\u53c2\u6570\uff0c\u5373\u4f7f\u6709\u591a\u4e2a\u670d\u52a1\u5668\u8282\u70b9\u5b58\u5728\uff0c\u4e5f\u53ea\u9700\u8981\u5728\u5404\u4e2a\u670d\u52a1\u671f\u95f4\u540c\u6b65\u4e00\u4e2ajson\u6587\u4ef6\u5c31\u53ef\u4ee5\u4e86\u3002</p>\n<p>\u5355\u7aef\u53e3\u591a\u7528\u6237\u7684\u76ee\u7684\u662f\u4ec0\u4e48\uff1f\u662f\u96c6\u4e2d\u670d\u52a1\u5668\u7684\u7aef\u53e3\u4f7f\u7528\uff0c\u907f\u514d\u5927\u91cf\u5f00\u653e\u7aef\u53e3\uff0c\u4e00\u4e2a\u670d\u52a1\u5668\u540c\u65f6\u5f00\u653e\u51e0\u767e\u4e2aTCP\u7aef\u53e3\u540c\u65f6\u90fd\u8fd8\u6709\u4e0d\u5c0f\u7684\u6570\u636e\u91cf\uff0c\u8fd9\u4e0d\u7528\u5206\u6790\u90fd\u53ef\u4ee5\u731c\u5230\u662f\u5e72\u5565\u7684\u3002\u800c\u628a\u7aef\u53e3\u9690\u85cf\u5230443\uff0c995\u8fd9\u6837\u7684\u5e38\u7528\u670d\u52a1\u7aef\u53e3\u4e0a\u5e76\u914d\u5408\u4e00\u5b9a\u7684\u6df7\u6dc6\uff0c\u76f8\u5bf9\u4f1a\u589e\u52a0\u4e00\u70b9\u63a2\u6d4b\u96be\u5ea6\u3002</p>\n<p>\u5148\u76f4\u63a5\u770b\u914d\u7f6e\u6587\u4ef6\uff1a</p>\n<div class=\"highlight\"><pre><span></span>[\n{\n&quot;d&quot;: 0,\n&quot;enable&quot;: 1,\n&quot;method&quot;: &quot;none&quot;,\n&quot;obfs&quot;: &quot;tls1.2_ticket_auth&quot;,\n&quot;passwd&quot;: &quot;JKlzs)9j&quot;,\n&quot;port&quot;: 995,\n&quot;protocol&quot;: &quot;auth_chain_b&quot;,\n&quot;protocol_param&quot;: &quot;#&quot;,\n&quot;transfer_enable&quot;: 9007199254740992,\n&quot;u&quot;: 0,\n&quot;user&quot;: &quot;995&quot;\n},\n{\n&quot;d&quot;: 16668442,\n&quot;enable&quot;: 1,\n&quot;method&quot;: &quot;none&quot;,\n&quot;obfs&quot;: &quot;tls1.2_ticket_auth&quot;,\n&quot;passwd&quot;: &quot;R=KA2VmQ&quot;,\n&quot;port&quot;: 100002,\n&quot;protocol&quot;: &quot;auth_chain_b&quot;,\n&quot;transfer_enable&quot;: 9007199254740992,\n&quot;u&quot;: 673936,\n&quot;user&quot;: &quot;100002&quot;\n}\n]\n</pre></div>\n\n\n<p>\u5148\u5efa\u7acb\u4e00\u4e2a\u9ed8\u8ba4\u7684\u7528\u6237\uff0c\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6211\u4eec\u9ed8\u8ba4\u5427\u7528\u6237ID\u548c\u7528\u6237\u7aef\u53e3\u5199\u6210\u4e00\u6837\u7684\uff0c\u8fd9\u91cc\u5c31\u662f995\u7528\u6237\uff0c\u8fd9\u4e2a\u7528\u6237\u6700\u660e\u663e\u7684\u7279\u5f81\uff0c\u5c31\u662fprotocol param\u662f\u201c#\u201d,\u8fd9\u6837\u7684\u53c2\u6570\u7528\u4e8e\u6807\u8bc6\u8fd9\u662f\u4e2a\u9ed8\u8ba4\u7528\u6237\uff0c\u4f46\u8fd9\u4e2a\u7528\u6237\u662f\u4e0d\u53ef\u7528\u7684\uff0c\u56e0\u4e3aprotocol param\u53ea\u5199\u4e2a\u201c#\u201d\u662f\u65e0\u6548\u7684\u3002</p>\n<p>\u7136\u540e\u518d\u65b0\u5efa\u4e00\u4e2a\u7528\u6237\uff0c\u7528\u6237ID\u5927\u4e8e65535\uff0c\u540c\u6837\u7684\u7aef\u53e3\u4e5f\u5927\u4e8e65535\uff0c\u56e0\u4e3a\u5927\u4e8e65535\u7684\u7aef\u53e3\u90fd\u662f\u4e0d\u5b58\u5728\u7684\uff0c\u6240\u4ee5\u8868\u793a\u8fd9\u662f\u4e2a\u5355\u7aef\u53e3\u591a\u7528\u6237\u8d26\u6237\uff0c\u8fd9\u4e2a\u7528\u6237\u7684\u52a0\u5bc6\u6df7\u6dc6\u8fd9\u4e9b\u4e1c\u897f\u53ef\u4ee5\u548c\u9ed8\u8ba4\u7528\u6237\u4e00\u6837\u4e5f\u53ef\u4ee5\u968f\u4fbf\u5199\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u90fd\u662f\u88ab\u5ffd\u7565\u7684\u3002\u9664\u4e86\u7528\u6237\u7aef\u53e3\uff0c\u5bc6\u7801\u4e4b\u5916\uff0c\u4e00\u5207\u90fd\u4f7f\u7528\u9ed8\u8ba4\u7528\u6237\u7684\u914d\u7f6e\u3002</p>\n<p>\u6240\u4ee5\uff0c\u8fd9\u91cc\u7684100002\u7528\u6237\uff0c\u9700\u8981\u4f7f\u7528<strong>\u9ed8\u8ba4\u7528\u6237\u7684\u7aef\u53e3\u3001\u5bc6\u7801</strong>\u3001\u534f\u8bae\u3001\u6df7\u6dc6\u65b9\u5f0f\u6765\u8fde\u63a5SSR\u670d\u52a1\u5668\uff0c\u540e\u9762\u6dfb\u52a0\u7684\u5176\u4ed6\u7528\u6237\u4e5f\u662f\u4e00\u6837\uff0c\u90a3\u4e48\u8fde\u5bc6\u7801\u90fd\u4e00\u6837\u7684\u8bdd\u600e\u4e48\u533a\u5206\u4e0d\u540c\u7684\u7528\u6237\u5462\uff1f\u90a3\u5c31\u9700\u8981\u4f7f\u7528protocol param\u4e86\uff0cprotocol param\u5c31\u662f\u8fd9\u4e2a\u7528\u6237\u7684ID\u548c\u81ea\u5df1\u5bc6\u7801\u7684\u7ec4\u5408\uff0c\u5373 100002:R=KA2VmQ\u3002</p>\n<p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u8fd9\u4e9b\u540e\u9762\u65b0\u5efa\u7684\u975e\u9ed8\u8ba4\u7528\u6237\u6765\u8bf4\uff0c\u8fde\u63a5\u65f6\u4f7f\u7528\u7684\u5bc6\u7801\u5c31\u662f\u9ed8\u8ba4\u7528\u6237\u7684\u5bc6\u7801\uff0c\u800c\u914d\u7f6e\u6587\u4ef6\u4e2d\u5199\u7684\u81ea\u5df1\u7684\u5bc6\u7801\uff0c\u662f\u7528\u6765\u548c\u81ea\u5df1\u7684ID\u7ec4\u5408\u6210protocol param\u7528\u7684\u3002</p>\n<p>\u4f7f\u7528auth_chain_*\u534f\u8bae\u7684\u8bdd\uff0c\u5373\u4f7f\u4f7f\u7528\u76f8\u540c\u7684\u5bc6\u7801\uff0c\u4f46\u53ea\u8981protocol param\u4e0d\u540c\uff0c\u4e0d\u540c\u7528\u6237\u95f4\u7684\u6570\u636e\u4e5f\u662f\u4e0d\u53ef\u4e92\u76f8\u89e3\u5bc6\u7684\u3002</p>", "description": "\u7f51\u4e0a\u6700\u65e9\u7684\u4e5f\u6700\u6743\u5a01\u7684\u5173\u4e8eSSR\u5355\u7aef\u53e3\u591a\u7528\u6237\u7684\u914d\u7f6e\u662f\u7834\u5a03\u9171\u5199\u7684\uff0c\u867d\u7136\u6587\u7ae0\u5df2\u7ecf\u88ab\u5220\u4e86\uff0c\u4f46\u7528archive\u8fd8\u662f\u53ef\u4ee5\u770b\u5230\u7684\uff0c\u53ea\u662f\u6587\u7ae0\u6709\u4e9b\u5730\u65b9\u5199\u7684\u8fd8\u4e0d\u591f\u7ec6\u81f4\uff0c\u5bb9\u6613\u4ea7\u751f\u8bef\u89e3\u3002\u6700\u8fd1\u81ea\u5df1\u521a\u597d\u4e5f\u5728\u5c1d\u8bd5\u8fd9\u4e2a\u914d\u7f6e\uff0c\u91cd\u65b0\u8bb0\u5f55\u5e76\u8bf4\u660e\u4e00\u4e0b\uff0c\u65b9\u4fbf\u4ee5\u540e\u67e5\u770b\u3002", "date_published": "2019-02-25T14:39:43+08:00"}, {"id": "tag:None,2018-12-19:posts/use_rclone_to_backup_google_photos.html", "url": "posts/use_rclone_to_backup_google_photos.html", "title": "\u4f7f\u7528rclone\u81ea\u52a8\u5907\u4efdGoogle Photos\u5230\u672c\u5730\u786c\u76d8", "content_html": "<p>\u9996\u5148\u5899\u88c2\u63a8\u8350\u4e00\u4e0bGoogle Photos\uff0c\u57fa\u672c\u4e0a\u5404\u4e2a\u5e73\u53f0\u90fd\u80fd\u7528\uff0c\u4e0d\u9700\u8981\u539f\u59cb\u753b\u8d28\u7684\u8bdd\u4e0d\u7528\u8003\u8651\u5bb9\u91cf\u95ee\u9898\uff0c\u53ef\u4ee5\u968f\u5fc3\u6240\u6b32\u7684\u5907\u4efd\u6240\u6709\u7167\u7247\uff0c\u66f4\u597d\u7684\u662f\u5b83\u7684\u81ea\u52a8\u5f71\u96c6\u751f\u6210\u529f\u80fd\u548c\u4ece\u89c6\u9891\u5171\u88c1\u526agif\u56fe\u7247\u7684\u529f\u80fd\uff0c\u7ecf\u5e38\u80fd\u5e26\u6765\u5f88\u591a\u610f\u60f3\u4e0d\u5230\u7684\u60ca\u559c\u3002\u5f53\u7136\u5b83\u4e5f\u6709\u4e00\u4e2a\u95ee\u9898\uff1a\u9700\u8981\u7ffb\u5899\u3002</p>\n<p>\u6211\u5012\u4e0d\u662f\u62c5\u5fc3\u54ea\u5929\u5899\u9ad8\u5230\u7ffb\u4e0d\u51fa\u53bb\u7684\u5730\u6b65\uff0c\u4f46\u6bd5\u7adf\u6240\u6709\u7167\u7247\u90fd\u5728\u4e0a\u9762\uff0c\u89c9\u5f97\u8fd8\u662f\u6709\u5fc5\u8981\u5728\u672c\u5730\u5b58\u4e00\u4e2a\u5907\u4efd\u4ee5\u4fbf\u968f\u65f6\u67e5\u770b\uff0c\u8fd9\u6837Google Photos\u5c31\u6210\u4e86\u4e00\u4e2a\u96c6\u6563\u4e2d\u5fc3\uff0c\u672c\u5730\u6210\u4e86\u6700\u7ec8\u7684\u5907\u4efd\u4ed3\u5e93\u3002\u6211\u6709\u4e00\u53f0\u88c5\u4e86ubuntu server\u7684deskmini\uff0c\u521a\u5f00\u59cb\u7684\u60f3\u6cd5\u662f\u770b\u770b\u6709\u6ca1\u6709Google Photos\u7684linux\u5ba2\u6237\u7aef\uff0c\u540e\u6765\u53d1\u73b0\u66f4\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u4f7f\u7528<a href=\"https://rclone.org/\">rclone</a>\u8fd9\u4e2a\u5168\u5e73\u53f0\u5236\u9738\u7684\u540c\u6b65\u5de5\u5177\u3002</p>\n<h2>\u5b89\u88c5</h2>\n<p>\u5b89\u88c5\u8fc7\u7a0b\u975e\u5e38\u7b80\u5355\uff0c\u4e00\u6761\u547d\u4ee4\u5c31\u641e\u5b9a\uff1a</p>\n<div class=\"highlight\"><pre><span></span>curl https://rclone.org/install.sh | sudo bash\n</pre></div>\n\n\n<h2>\u914d\u7f6eGoogleDrive\u8d26\u53f7</h2>\n<p>\u57fa\u672c\u7684\u914d\u7f6e\u8fc7\u7a0b\u53ef\u4ee5\u53c2\u8003<a href=\"https://rclone.org/drive/\">\u8fd9\u91cc</a>\uff0c\u8fd9\u91cc\u53ea\u8bf4\u4e00\u4e0b\u8981\u70b9\uff1a\n<em> client id\u4ec0\u4e48\u7684\u5176\u5b9e\u90fd\u4e0d\u7528\u7ba1\uff0c\u76f4\u63a5\u56de\u8f66\u5c31\u53ef\u4ee5\u4e86\uff0c\u6700\u7ec8\u662f\u901a\u8fc7web auth\u6765\u5b9e\u73b0\u8ba4\u8bc1\u7684\uff0c\u5982\u679c\u5df2\u7ecf\u767b\u5f55\u4e86Google \u8d26\u53f7\uff0c\u5168\u7a0b\u4e0d\u9700\u8981\u8f93\u5165\u5bc6\u7801\u3002\n</em> \u5982\u679c\u4f60\u662f\u7528\u8fc7ssh\u94fe\u63a5ubuntu server\u914d\u7f6e\uff0c\u4e0d\u8981\u9009\u62e9auto config\u6a21\u5f0f\uff0c\u56e0\u4e3a\u673a\u5668\u4e0a\u5e76\u6ca1\u6709\u6d4f\u89c8\u5668\u8ba9\u4f60\u8fdb\u884cweb auth,\u8ba9rclone\u751f\u6210\u4e00\u4e2aweb\u5730\u5740\uff0c\u4f60\u81ea\u5df1\u6253\u5f00\u8fd9\u4e2a\u5730\u5740\u540e\u83b7\u5f97\u4e00\u4e2a\u6388\u6743\u7801\uff0c\u7136\u540e\u7c98\u8d34\u56de\u53bb\u3002\n<em> name\u90a3\u9879\u968f\u4fbf\u586b\uff0c\u4f46\u8981\u8bb0\u4f4f\uff0c\u8fd9\u5c31\u662f\u4ee5\u540e\u4f60google drive\u6839\u76ee\u5f55\u7684\u522b\u79f0\u4e86\u3002\n</em> \u4ecb\u4e8e\u6211\u53ea\u9700\u8981\u540c\u6b65\u5230\u672c\u5730\uff0c\u6743\u9650\u9009\u62e9read only\u5c31\u53ef\u4ee5\u4e86\uff0c\u4ee5\u514d\u8bef\u64cd\u4f5c\u5220\u9664\u4e86\u6587\u4ef6\u5939\u3002\n* \u9ed8\u8ba4\u60c5\u51b5\u4e0bGoogle Photos\u76ee\u5f55\u5e76\u4e0d\u51fa\u73b0\u5728Google Drive\u4e2d\uff0c\u9700\u8981\u8bbf\u95eegoogle drive\u7684web\u8bbe\u7f6e\uff0c\u52fe\u9009\u201cCreate a Google Photos folder\u201d\u8fd9\u9879\uff0c\u5982\u679c\u6709\u5fc5\u8981\uff0c\u5efa\u8bae\u628a\u51fa\u73b0\u540e\u7684Google Photo\u76ee\u5f55\u540d\u79f0\u6539\u6210\u65e0\u7a7a\u683c\u7684\u82f1\u6587\u8def\u5f84\uff0c\u5426\u5219\u4e2d\u6587\u8def\u5f84\u5e26\u4e2a\u7a7a\u683c\u633a\u70e6\u4eba\u7684\u3002</p>\n<h2>\u540c\u6b65\u5230\u672c\u5730</h2>\n<p>\u4e00\u6761\u547d\u4ee4\u5c31\u884c\u4e86\uff1a</p>\n<div class=\"highlight\"><pre><span></span>rclone copy gdrive:GooglePhotos /SafeHub/GooglePhotos\n</pre></div>\n\n\n<p>gdrive\u5c31\u662f\u521a\u624d\u5efa\u7acb\u7684Googledrive\u7684\u8d26\u53f7\u540d\u79f0\uff0c\u4e5f\u5c31\u662f\u521a\u624d\u8bf4\u7684\u4ee5\u540e\u90fd\u662f\u6839\u76ee\u5f55\u522b\u79f0\u7684\u90a3\u4e2a\uff0c\u540e\u9762\u7684/SafeHub\u662f\u6211\u81ea\u5df1\u672c\u673a\u4e0a\u7684\u4e00\u4e2aRAID1\u78c1\u76d8\uff0c\u6839\u636e\u4f60\u7684\u60c5\u51b5\u9009\u62e9\u672c\u5730\u8def\u5f84\u5373\u53ef\u3002</p>\n<h2>\u81ea\u52a8\u6267\u884c</h2>\n<p>\u5148\u627e\u51fa\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\uff1a</p>\n<div class=\"highlight\"><pre><span></span>rclone config file\n</pre></div>\n\n\n<p>\u7136\u540e\u8fd0\u884ccrontab -e\u6765\u6dfb\u52a0\u4e00\u4e2acronjob\uff0c\u4f8b\u5982\u6211\u5e0c\u671b\u4ed6\u6bcf\u59292\uff1a30\u5206\u5907\u4efd\u4e00\u6b21(\u5df2\u7ecf\u4e0b\u8f7d\u7684\u4f1a\u81ea\u52a8\u8df3\u8fc7),\u5c31\u6dfb\u52a0\u8fd9\u6837\u7684\u4e00\u4e2acron job\uff1a</p>\n<div class=\"highlight\"><pre><span></span>30 2 * * * /usr/bin/rclone --config /root/.config/rclone/rclone.conf copy gdrive:GooglePhotos /SafeHub/GooglePhotos\n</pre></div>", "description": "\u9996\u5148\u5899\u88c2\u63a8\u8350\u4e00\u4e0bGoogle Photos\uff0c\u57fa\u672c\u4e0a\u5404\u4e2a\u5e73\u53f0\u90fd\u80fd\u7528\uff0c\u4e0d\u9700\u8981\u539f\u59cb\u753b\u8d28\u7684\u8bdd\u4e0d\u7528\u8003\u8651\u5bb9\u91cf\u95ee\u9898\uff0c\u53ef\u4ee5\u968f\u5fc3\u6240\u6b32\u7684\u5907\u4efd\u6240\u6709\u7167\u7247\uff0c\u66f4\u597d\u7684\u662f\u5b83\u7684\u81ea\u52a8\u5f71\u96c6\u751f\u6210\u529f\u80fd\u548c\u4ece\u89c6\u9891\u5171\u88c1\u526agif\u56fe\u7247\u7684\u529f\u80fd\uff0c\u7ecf\u5e38\u80fd\u5e26\u6765\u5f88\u591a\u610f\u60f3\u4e0d\u5230\u7684\u60ca\u559c\u3002", "date_published": "2018-12-19T15:55:00+08:00"}, {"id": "tag:None,2018-12-01:posts/setup_netflix_unblocker_for_vps.html", "url": "posts/setup_netflix_unblocker_for_vps.html", "title": "VPS\u7684Netflix IP\u89e3\u9501\u670d\u52a1\u81ea\u5236\u7248", "content_html": "<h2>\u9700\u6c42\u7684\u8d77\u6e90</h2>\n<p>\u6700\u8fd1\u5df2\u7ecf\u57fa\u672c\u4e0a\u628a\u770b\u7247\u7684\u5e73\u53f0\u8f6c\u79fb\u5230Netflix\u4e86\uff0c\u786e\u5b9e\u8282\u7701\u4e86\u5f88\u591a\u4e0b\u7247\u627e\u7247\u7684\u65f6\u95f4\uff0c\u800c\u4e14\uff0c\u4e0d\u8003\u8651\u9632\u706b\u5899\u548c\u4ee3\u7406\u7684\u95ee\u9898\u4e0b\uff0c\u8fd9\u597d\u6b79\u662f\u6b63\u7248\u7684\u4ed8\u8d39\u770b\u7247\u3002\u9274\u4e8e\u4e2d\u56fd\u7684\u73b0\u72b6\uff0c\u770bNetflix\u7ffb\u5899\u662f\u5fc5\u987b\u7684\uff0c\u800c\u4e14\u8fd8\u6311\u68af\u5b50\uff0cNetflix\u57fa\u672c\u4e0a\u628a\u5927\u5382\u7684IP\u90fd\u7ed9\u5217\u5165\u5c01\u9501\u5217\u8868\u4e86\uff0c\u6307\u671b\u7528Google Cloud\u642d\u9178\u9178\u4e73\u770bNetflix\u662f\u4e2a\u6bd4\u8f83\u9065\u8fdc\u7684\u68a6\u60f3\u3002</p>\n<p>\u6700\u8fd1\u5728\u67d0VPS\u670d\u52a1\u5546\u90a3\u91cc\u770b\u5230\u4ed6\u4eec\u63d0\u4f9b\u4e00\u4e2aNetflix IP\u89e3\u9501\u670d\u52a1\uff0c\u4e5f\u5c31\u662f\u8bf4\u8ba9\u90a3\u4e9b\u672c\u6765\u4e0d\u80fd\u64ad\u653eNetflix\u7684VPS\uff0c\u901a\u8fc7\u4ed6\u4eec\u7684\u670d\u52a1\u53ef\u4ee5\u64ad\u653e\u6307\u5b9a\u533a\u57df\u7684VPS\u3002\u521a\u5f00\u59cb\u6211\u8111\u5b50\u4e00\u62bd\u8fd8\u4ee5\u4e3a\u4ed6\u4eec\u80fd\u628a\u6570\u636e\u4e2d\u5fc3\u7684IP\u53d8\u6210\u5bb6\u5ead\u5bbd\u5e26\u7684IP\u6765\u9a97\u8fc7Netflix\uff0c\u540e\u6765\u95fb\u4e86\u4e00\u4e0b\u9700\u8981\u63d0\u4f9bVPS\u7684root\u5bc6\u7801\u6765\u8ba9\u4ed6\u4eec\u8bbe\u7f6e\uff0c\u6211\u4e00\u770b\u8fd9\u4e0d\u5c31\u662f\u4e2a\u4ee3\u7406\u670d\u52a1\u5417\uff1f</p>\n<p>\u5176\u5b9e\u8fd9\u4e2a\u4e5f\u633a\u597d\u7684\uff0c\u56e0\u4e3a\u5728\u5899\u5916\u7684VPS\u4e4b\u95f4\uff0c\u4e5f\u5c31\u662f\u6570\u636e\u4e2d\u5fc3\u4e4b\u524d\u5176\u5b9e\u901f\u5ea6\u8fd8\u662f\u5f88\u5feb\u7684\uff0c\u57fa\u672c\u4e0a\u4e0d\u7528\u62c5\u5fc3\u5e26\u5bbd\u4e0d\u8db3\u5ef6\u8fdf\u592a\u5927\u6216\u8005\u901f\u5ea6\u4e0d\u7a33\u5b9a\u8fd9\u4e9b\u95ee\u9898\uff0c\u5373\u4f7f\u7ecf\u8fc7\u4e00\u6b21\u8f6c\u53d1\uff0c\u4e5f\u4e0d\u592a\u5f71\u54cd\u4f7f\u7528\u4f53\u9a8c\u3002</p>\n<h2>\u5426\u5b9a\u7684\u7b2c\u4e00\u5957\u65b9\u6848</h2>\n<p>\u6700\u5f00\u59cb\u7684\u65b9\u6848\u57fa\u672c\u4e0a\u5c31\u662f\u9760\u7740Google\u641cNetflix Proxy\u627e\u5230\u7684\uff0c\u7b80\u5355\u7684\u8bf4\u5c31\u662f\u5728\u53ef\u4ee5\u770bNetflix\u7684VPS A\u4e0a\u642d\u4e00\u4e2aTCP\u53cd\u4ee3\uff0c\u5728VPS B\u4e0a\u7528dnsmasq\u4e4b\u7c7b\u7684\u5de5\u5177\u52ab\u6301DNS\u89e3\u6790\uff0c\u628aNetflix\u7684\u76f8\u5173\u57df\u540d\u90fd\u89e3\u6790\u5230VPS A\u4e0a\uff0c\u8fd9\u6837VPS B\u5c31\u53ef\u4ee5\u501f\u7528A\u7684\u53cd\u4ee3\u6765\u8bbf\u95eeNetflix\u4e86\u3002\n\u5e9f\u8bdd\u4e0d\u591a\u5c11\u76f4\u63a5\u4e0a\u4ee3\u7801\uff0cVPS A\u4e0a\u5b89\u88c5sniproxy\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a</p>\n<div class=\"highlight\"><pre><span></span>user nobody\nresolver {\n    nameserver 8.8.8.8\n    mode ipv4_only\n}\n\nlisten 0.0.0.0:443 {\nproto tls\ntable https_hosts\naccess_log {\n  filename /var/log/https_access.log\n  priority notice\n }\n}\n\ntable https_hosts {\n    (.*.|)netflix.com$ *\n    (.*.|)netflix.net$ *\n    (.*.|)nflxext.com$ *\n    (.*.|)nflxso.net$ *\n    (.*.|)nflximg.net$ *\n    (.*.|)nflxvideo.net$ *\n}\n</pre></div>\n\n\n<p>VPS B\u4e0a\u5b89\u88c5dnsmasq\uff0c\u914d\u7f6e\u5982\u4e0b\uff1a</p>\n<div class=\"highlight\"><pre><span></span>no-resolv\nno-poll\nserver=1.1.1.1\naddress=/netflix.com/18.215.191.191\naddress=/nflxext.com/18.215.191.191\naddress=/nflximg.net/18.215.191.191\naddress=/nflxext.com/18.215.191.191\naddress=/nflxso.net/18.215.191.191\naddress=/nflxvideo.net/18.215.191.191\n</pre></div>\n\n\n<p>\u8fd9\u79cd\u65b9\u6848\u4e4b\u6240\u4ee5\u88ab\u5426\u5b9a\uff0c\u662f\u56e0\u4e3a\u672c\u8d28\u4e0a\u4f9d\u8d56DNS\u52ab\u6301\u3002\u4f60\u53ef\u4ee5\u52ab\u6301VPS B\u672c\u8eab\u7684DNS\u89e3\u6790\uff0c\u4f46\u4f60\u5728VPS B\u4e0a\u642d\u5efa\u68af\u5b50\u540e\uff0c\u4f60\u5e76\u6ca1\u6709\u529e\u6cd5\u4fdd\u8bc1\u52ab\u6301\u8fde\u4e0a\u8fd9\u4e2a\u68af\u5b50\u7684\u7528\u6237\u7684DNS\u3002\u5927\u90e8\u5206\u7528\u6237\u4f7f\u7528ssr-redir\u63d0\u4f9b\u7684\u900f\u660e\u4ee3\u7406\uff0c\u57fa\u4e8e\u57df\u540d\u8f6c\u53d1\uff0c\u8fd9\u6837\u662f\u53ef\u4ee5\u7684\uff0c\u4f46\u8fd8\u662f\u6709\u90e8\u5206\u7528\u6237\u4e0d\u9002\u7528\u8fdc\u7aef\u7684DNS\u89e3\u6790\u800c\u4f7f\u7528\u672c\u5730\u7684\u89e3\u6790\uff0c\u8fd9\u6837\u5c31\u65e0\u6cd5\u6210\u529f\u52ab\u6301\u4e86\u3002\u6240\u4ee5\u5bf9\u8fd9\u90e8\u5206\u7528\u6237\u6765\u8bf4\uff0c\u6d41\u91cf\u8fd8\u662f\u4f1a\u7ecf\u8fc7VPS B\u7684\u4ee3\u7406\uff0c\u4f46\u4f1a\u4e0d\u88ab\u52ab\u6301\u7684\u8bbf\u95ee\u539f\u59cb\u7684Netflix\u670d\u52a1\u5668\uff0c\u6700\u7ec8\u5bfc\u81f4\u64ad\u653e\u5931\u8d25\u3002</p>\n<h2>\u65b0\u65b9\u6848</h2>\n<p>\u5176\u5b9e\u6211\u628a\u95ee\u9898\u60f3\u5f97\u592a\u590d\u6742\u4e86\uff0c\u8fd9\u4e0d\u5c31\u662f\u666e\u901a\u7684\u900f\u660e\u4ee3\u7406\u8f6c\u53d1\u5417\uff1fshadowsocks(R)\u5c31\u53ef\u4ee5\u5b9e\u73b0\u554a\uff0c\u53ea\u4e0d\u8fc7\u4e24\u53f0\u5899\u5916\u7684VPS\u7528\u52a0\u5bc6\u4ee3\u7406\u5b9e\u5728\u662f\u6d6a\u8d39CPU\u8d44\u6e90\uff0c\u666e\u901a\u7684\u4ee3\u7406\u5c31\u8db3\u591f\u4e86\u3002\u6240\u4ee5\u6211\u51b3\u5b9a\u5728VPS A\u7528Tinyproxy\u67b6\u8bbehttps\u4ee3\u7406\uff0c\u7136\u540e\u5728VPS B\u7528redsocks\u8f6c\u6210\u900f\u660e\u4ee3\u7406\u7136\u540e\u8f6c\u53d1\u3002</p>\n<h3>\u67b6\u8bbeTinyproxy Https\u4ee3\u7406</h3>\n<p>\u5176\u5b9e\u5f88\u7b80\u5355\uff0c\u76f4\u63a5apt-get install tinyproxy\u5c31\u53ef\u4ee5\u4e86\u3002\u8bbe\u7f6e\u4e0a\u6211\u4e5f\u51e0\u4e4e\u6ca1\u6709\u4fee\u6539\uff0c\u4ec5\u4ec5\u662f\u6dfb\u52a0\u4e86\u4e00\u4e2aAllow\u8bed\u53e5\uff0c\u7ed9VPS B\u7684IP\u653e\u884c\uff0c\u5426\u5219\u662f\u65e0\u6cd5\u4f7f\u7528\u7684\u3002\u800c\u4e14\u8fd9\u6837\u9ed8\u8ba4\u4e5f\u5c4f\u853d\u4e86\u5176\u4ed6IP\u7684\u8bbf\u95ee\uff0c\u907f\u514d\u4e86\u53d8\u6210\u51a4\u5927\u5934\u3002\n\u6700\u540e\u7684\u914d\u7f6e\u5982\u4e0b\uff1a</p>\n<div class=\"highlight\"><pre><span></span>User tinyproxy\nGroup tinyproxy\nPort 8888\nTimeout 600\nDefaultErrorFile &quot;/usr/share/tinyproxy/default.html&quot;\nStatFile &quot;/usr/share/tinyproxy/stats.html&quot;\nLogfile &quot;/var/log/tinyproxy/tinyproxy.log&quot;\nLogLevel Info\nPidFile &quot;/run/tinyproxy/tinyproxy.pid&quot;\nMaxClients 100\nMinSpareServers 5\nMaxSpareServers 20\nStartServers 10\nMaxRequestsPerChild 0\nAllow 127.0.0.1\nAllow YOUR_VPS_B_IP\nViaProxyName &quot;tinyproxy&quot;\nConnectPort 443\nConnectPort 563\n</pre></div>\n\n\n<h3>\u67b6\u8bbeRedsocks\u4ee3\u7406</h3>\n<p>\u4e5f\u662f\u76f4\u63a5apt-get install redsocks\uff0c\u914d\u7f6e\u4e2d\u53ea\u9700\u8981\u8bbe\u7f6e\u597dhttps\u4ee3\u7406\u7684IP\u548c\u7aef\u53e3\u5c31\u884c\uff0c\u8bb0\u5f97https\u4ee3\u7406\u7684\u7c7b\u578b\u662f\u586bhttp-connect\u3002</p>\n<div class=\"highlight\"><pre><span></span><span class=\"nt\">base</span> <span class=\"p\">{</span>\n    <span class=\"err\">//</span> <span class=\"n\">debug</span><span class=\"p\">:</span> <span class=\"n\">connection</span> <span class=\"kc\">progress</span> <span class=\"o\">&amp;</span> <span class=\"n\">client</span> <span class=\"n\">list</span> <span class=\"kc\">on</span> <span class=\"n\">SIGUSR1</span>\n    <span class=\"n\">log_debug</span> <span class=\"o\">=</span> <span class=\"kc\">off</span><span class=\"p\">;</span>\n\n    <span class=\"err\">//</span> <span class=\"n\">info</span><span class=\"p\">:</span> <span class=\"kc\">start</span> <span class=\"n\">and</span> <span class=\"kc\">end</span> <span class=\"n\">of</span> <span class=\"n\">client</span> <span class=\"n\">session</span>\n    <span class=\"n\">log_info</span> <span class=\"o\">=</span> <span class=\"kc\">on</span><span class=\"p\">;</span>\n\n    <span class=\"c\">/* possible `log&#39; values are:</span>\n<span class=\"c\">     *   stderr</span>\n<span class=\"c\">     *   &quot;file:/path/to/file&quot;</span>\n<span class=\"c\">     *   syslog:FACILITY  facility is any of &quot;daemon&quot;, &quot;local0&quot;...&quot;local7&quot;</span>\n<span class=\"c\">     */</span>\n    <span class=\"err\">log</span> <span class=\"err\">=</span> <span class=\"err\">&quot;</span><span class=\"n\">syslog</span><span class=\"p\">:</span><span class=\"n\">daemon</span><span class=\"s2\">&quot;;</span>\n\n<span class=\"s2\">    // detach from console</span>\n<span class=\"s2\">    daemon = on;</span>\n\n<span class=\"s2\">    /* Change uid, gid and root directory, these options require root</span>\n<span class=\"s2\">     * privilegies on startup.</span>\n<span class=\"s2\">     * Note, your chroot may requre /etc/localtime if you write log to syslog.</span>\n<span class=\"s2\">     * Log is opened before chroot &amp; uid changing.</span>\n<span class=\"s2\">     */</span>\n<span class=\"s2\">    user = redsocks;</span>\n<span class=\"s2\">    group = redsocks;</span>\n<span class=\"s2\">    // chroot = &quot;</span><span class=\"o\">/</span><span class=\"n\">var</span><span class=\"o\">/</span><span class=\"n\">chroot</span><span class=\"s2\">&quot;;</span>\n\n<span class=\"s2\">    /* possible `redirector&#39; values are:</span>\n<span class=\"s2\">     *   iptables   - for Linux</span>\n<span class=\"s2\">     *   ipf        - for FreeBSD</span>\n<span class=\"s2\">     *   pf         - for OpenBSD</span>\n<span class=\"s2\">     *   generic    - some generic redirector that MAY work</span>\n<span class=\"s2\">     */</span>\n<span class=\"s2\">    redirector = iptables;</span>\n<span class=\"s2\">}</span>\n\n<span class=\"s2\">redsocks {</span>\n<span class=\"s2\">    /* `local_ip&#39; defaults to 127.0.0.1 for security reasons,</span>\n<span class=\"s2\">     * use 0.0.0.0 if you want to listen on every interface.</span>\n<span class=\"s2\">     * `local_*&#39; are used as port to redirect to.</span>\n<span class=\"s2\">     */</span>\n<span class=\"s2\">    local_ip = 127.0.0.1;</span>\n<span class=\"s2\">    local_port = 12345;</span>\n\n<span class=\"s2\">    // `ip&#39; and `port&#39; are IP and tcp-port of proxy-server</span>\n<span class=\"s2\">    // You can also use hostname instead of IP, only one (random)</span>\n<span class=\"s2\">    // address of multihomed host will be used.</span>\n<span class=\"s2\">    ip = YOUR_VPS_A_IP; </span>\n<span class=\"s2\">    port = 8888;</span>\n\n\n<span class=\"s2\">    // known types: socks4, socks5, http-connect, http-relay</span>\n<span class=\"s2\">    type = http-connect;</span>\n\n<span class=\"s2\">    // login = &quot;</span><span class=\"n\">foobar</span><span class=\"s2\">&quot;;</span>\n<span class=\"s2\">    // password = &quot;</span><span class=\"n\">baz</span><span class=\"err\">&quot;</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</pre></div>\n\n\n<p>\u7136\u540e\u914d\u7f6eiptables\uff0c\u5148\u5efa\u7acb\u4e00\u4e2aREDSOCKS\u94fe:</p>\n<div class=\"highlight\"><pre><span></span>iptables -t nat -N REDSOCKS\n</pre></div>\n\n\n<p>\u8fd9\u91cc\u6709\u4e24\u5957\u601d\u8def\u8fdb\u884c\u8f6c\u53d1\uff0c\u4e00\u5957\u662f\u627e\u51faNetflix\u6240\u6709\u7684IP\u5730\u5740\uff0c\u7136\u540e\u6dfb\u52a0\u5230REDSOCKS\u94fe\uff0c\u4f8b\u5982\uff1a</p>\n<div class=\"highlight\"><pre><span></span>iptables -t nat -A OUTPUT -d 198.38.0.0/16 -j REDSOCKS\n</pre></div>\n\n\n<p>\u4f46\u95ee\u9898\u662fNetflix\u4f7f\u7528\u4e86akamai\u7684CDN\u670d\u52a1\u5668\uff0cIP\u5730\u5740\u8303\u56f4\u662f\u5728\u592a\u5927\u4e86\uff0c\u6211\u5df2\u7ecf\u628aNetflix\u6574\u4e2a<a href=\"https://ipinfo.io/AS2906\">AS\u7684\u5730\u5740</a>\u90fd\u6dfb\u52a0\u4e86\u4e5f\u8fd8\u662f\u4f1a\u63d0\u793a\u5728\u4f7f\u7528proxy\u3002</p>\n<p>\u5e72\u8106\u66b4\u529b\u70b9\uff0c\u76f4\u63a5\u628a\u6240\u6709https\u6d41\u91cf\u90fd\u6dfb\u52a0\u8fdb\u53bb:</p>\n<div class=\"highlight\"><pre><span></span>iptables -t nat -A OUTPUT -p tcp --dport 443 -j REDSOCKS\n</pre></div>\n\n\n<p>\u6700\u540e\uff0c\u8f6c\u53d1\u5230redsocks\u7684\u900f\u660e\u4ee3\u7406\u7aef\u53e3\uff1a</p>\n<div class=\"highlight\"><pre><span></span>iptables -t nat -A REDSOCKS -p tcp -j REDIRECT --to-ports 12345\n</pre></div>\n\n\n<p>\u6700\u540e\u8bb0\u5f97\u7528iptables-persistent\u4e4b\u7c7b\u7684\u5de5\u5177\u4fdd\u5b58\u4e00\u4e0biptables\u89c4\u5219\uff0c\u8fd9\u6837\u4e0d\u8bba\u662f\u4eceVPS B\u672c\u673a\u8bbf\u95ee\uff0c\u8fd8\u662f\u900f\u8fc7VPS B\u4e0a\u7684\u4ee3\u7406\uff0c\u6700\u540eNetflix\u7684HTTPS\u6d41\u91cf\u90fd\u4f1a\u901a\u8fc7VPS A\u8bbf\u95ee\uff0c\u800cNetflix\u662f\u5168Https\u7684\uff0c\u6240\u4ee5http\u90e8\u5206\u6211\u4eec\u4e0d\u9700\u8981\u5173\u5fc3\u3002</p>\n<h2>\u66f4\u5c0f\u7684IP\u8303\u56f4</h2>\n<p>\u5168\u90e8\u8f6c\u53d1\u53ef\u80fd\u8fd8\u662f\u592a\u66b4\u529b\u4e86\uff0c\u7b80\u5355\u4e00\u70b9\u7684\u505a\u6cd5\u662f\u8f6c\u53d1Netflix\u6240\u6709\u7684IP\u548cAWS\u6240\u6709\u7684IP(\u56e0\u4e3a\u5f53\u524dNetflix\u6709\u5f88\u591a\u670d\u52a1\u662f\u67b6\u8bbe\u5728AWS\u4e0a\u7684)\u3002</p>\n<p>Netflix\u7684IP\u53ef\u4ee5\u5728<a href=\"https://ipinfo.io/AS2906\">\u8fd9\u91cc</a>\u67e5\u5230\uff0c\u800cAWS\u7684IP\u53ef\u4ee5\u5728<a href=\"https://ipinfo.io/AS2906\">\u8fd9\u91cc</a>\u770b\u5230\uff0c\u7136\u540e\u628a\u8fd9\u4e9bIP\u8303\u56f4\u5206\u522b\u6dfb\u52a0\u5230\u4e24\u4e2aIPSET\u4e2d\uff0c\u6211\u628a\u5b83\u4eec\u5206\u522b\u547d\u540d\u4e3aaws\u548cnetflix\u3002</p>\n<div class=\"highlight\"><pre><span></span>ipset create aws hash:net\nipset create netflix hash:net\n</pre></div>\n\n\n<p>\u600e\u4e48\u8f6c\u6210\u547d\u4ee4\u6211\u5c31\u61d2\u5f97\u5199\u4e86\uff0c<a href=\"https://www.lifetyper.com/files/ipset.sh\">\u8fd9\u91cc</a>\u6709\u73b0\u6210\u7684\u811a\u672c\u3002\nUpdate:\u751f\u6210bash\u547d\u4ee4\u7684Python\u811a\u672c\u5728<a href=\"https://gist.github.com/lifetyper/347cf7c4dbadee91e80670acb064b670\">\u8fd9\u91cc</a>\uff0c\u81ea\u5df1\u53bb\u770b\u5427\u3002</p>\n<p>\u7136\u540e\uff0c\u628a\u8fd9\u4e24\u4e2aIPSET\u91ccIP\u7684443\u7aef\u53e3\u76ee\u6807\u6d41\u91cf\u5168\u90e8\u8f6c\u53d1\u5230REDSOCKS\u7684\u900f\u660e\u4ee3\u7406\u4e0a\u3002</p>\n<div class=\"highlight\"><pre><span></span>iptables -t nat -A PREROUTING -p tcp --dport 443 -m set --match-set aws dst -j REDIRECT --to-ports 12345\niptables -t nat -A PREROUTING -p tcp --dport 443 -m set --match-set netflix dst -j REDIRECT --to-ports 12345\niptables -t nat -A OUTPUT -p tcp --dport 443 -m set --match-set aws dst -j REDIRECT --to-ports 12345\niptables -t nat -A OUTPUT -p tcp --dport 443 -m set --match-set netflix dst -j REDIRECT --to-ports 12345\n</pre></div>\n\n\n<p>\u53ef\u80fd\u7684\u95ee\u9898\uff1a\n<em> \u4f60\u7684\u4ee3\u7406\u670d\u52a1\u5668\u672c\u8eab\u5c31\u662fAWS\u670d\u52a1\u5668\uff0c\u8fd9\u4e2a\u5c31\u6bd4\u8f83\u5c34\u5c2c\u4e86\uff0c\u81ea\u5df1\u6dfb\u52a0\u4e00\u4e2a\u6392\u9664\u89c4\u5219\u5427\uff0c\u5176\u5b9eAWS\u7684\u670d\u52a1\u5668\u5c31\u7b97\u80fd\u770bNetflix\u4e5f\u662f\u6682\u65f6\u7684\uff0c\u65e9\u665a\u88ab\u5c01\u3002\n</em> \u91cd\u542f\u540eipset\u4e22\u5931\uff0c\u8fd9\u662f\u4e2a\u95ee\u9898\uff0c\u6211\u76ee\u524d\u4e5f\u4e0d\u77e5\u9053\u6709\u4ec0\u4e48\u66f4\u4f18\u96c5\u7684\u65b9\u5f0f\u6765\u89e3\u51b3\uff0c\u7b80\u5355\u70b9\u53ef\u4ee5\u5728\u542f\u52a8\u9879\u91cc\u91cd\u5199ipset\u3002</p>\n<h2>\u4fdd\u5b58\u8fd9\u4e9b\u89c4\u5219</h2>\n<div class=\"highlight\"><pre><span></span>ipset save &gt; /etc/ipset.conf\niptables-save  &gt; /etc/iptables.conf\n</pre></div>\n\n\n<p>\u7136\u540e\u5728/etc/rc.local\u91cc\u5199\u5165\uff1a</p>\n<div class=\"highlight\"><pre><span></span>ipset restore &lt; /etc/ipset.conf\niptables-restore &lt; /etc/iptables.conf\n</pre></div>", "description": "\u6700\u8fd1\u5df2\u7ecf\u57fa\u672c\u4e0a\u628a\u770b\u7247\u7684\u5e73\u53f0\u8f6c\u79fb\u5230Netflix\u4e86\uff0c\u786e\u5b9e\u8282\u7701\u4e86\u5f88\u591a\u4e0b\u7247\u627e\u7247\u7684\u65f6\u95f4\uff0c\u800c\u4e14\uff0c\u4e0d\u8003\u8651\u9632\u706b\u5899\u548c\u4ee3\u7406\u7684\u95ee\u9898\u4e0b\uff0c\u8fd9\u597d\u6b79\u662f\u6b63\u7248\u7684\u4ed8\u8d39\u770b\u7247\u3002\u9274\u4e8e\u4e2d\u56fd\u7684\u73b0\u72b6\uff0c\u770bNetflix\u7ffb\u5899\u662f\u5fc5\u987b\u7684\uff0c\u800c\u4e14\u8fd8\u6311\u68af\u5b50\uff0cNetflix\u57fa\u672c\u4e0a\u628a\u5927\u5382\u7684IP\u90fd\u7ed9\u5217\u5165\u5c01\u9501\u5217\u8868\u4e86\uff0c\u6307\u671b\u7528Google Cloud\u642d\u9178\u9178\u4e73\u770bNetflix\u662f\u4e2a\u6bd4\u8f83\u9065\u8fdc\u7684\u68a6\u60f3\u3002", "date_published": "2018-12-01T23:55:00+08:00"}, {"id": "tag:None,2018-11-26:posts/setup_dero_web_wallet.html", "url": "posts/setup_dero_web_wallet.html", "title": "How to setup your own dero web wallet", "content_html": "<h1>The future for dero wallet</h1>\n<p>Dero nightly build has already support a very useful new funtion:Web Wallet.It's archived by using golang web assembly build,totally run in your browser.As mentioned by dero dev team, dero gui wallet will be abandoned, all resouce will focused on web wallet.</p>\n<p>Besides the official derowallet.io, you may want to setup your own web wallet, host on a server for public use or just run it locally.Here is  the step for set up your own dero web wallet.</p>\n<h2>Compile new version of dero daemon to support web wallet</h2>\n<p>To support web assembly funtion, you need to use minimum Golang version 1.11.1 for this  build, old version will not work.</p>\n<p>git clone the code from dero offcial git repo <a href=\"https://git.dero.io/DeroProject/derosuite_webwallet\">https://git.dero.io/DeroProject/derosuite_webwallet</a>. You'd better move the code to your Gopath source folder, the source path for me is </p>\n<div class=\"highlight\"><pre><span></span>~/go/src/github.com/deroproject/derosuite\n</pre></div>\n\n\n<p>Then build it with command:</p>\n<div class=\"highlight\"><pre><span></span>go install github.com/deroproject/derosuite/cmd/...\n</pre></div>\n\n\n<p>You shall find binary file under $GOPATH/bin folder.</p>\n<p>If you want to deploy your web wallet to a linux web server but your building system is others, you can specify the GOOS and GOARCH for this build</p>\n<div class=\"highlight\"><pre><span></span>GOOS=linux GOARH=amd64 go install github.com/deroproject/derosuite/cmd/...\n</pre></div>\n\n\n<h2>Compile web assembly file for web wallet</h2>\n<p>All core wallet function is implemented in the web wallet web assembly file, you can build it with command:</p>\n<div class=\"highlight\"><pre><span></span>cd ~/go/src/github.com/deroproject/derosuite/\nGOOS=js GOARCH=wasm go build -o wallet.wasm cmd/webwallet/main.go\n</pre></div>\n\n\n<p>You will find a file named wallet.wasm where you excute this command.</p>\n<h2>Get the web root for web wallet</h2>\n<p>Simple git clone the web root from Get from <a href=\"https://git.dero.io/DeroProject/webroot\">https://git.dero.io/DeroProject/webroot</a>, then move the wallet.wasm file we just compiled into the webroot/static/ folder.</p>\n<h2>Place the webroot folder to correct place</h2>\n<p>You need to place the webroot folder to the folder <strong>where you run the dero daemon</strong>,if we place it under ~/dero/ folder,  then we should start dero daemon from that folder.</p>\n<h2>Use the web wallet</h2>\n<p>After start the dero daemon from correct folder, you can visit http://127.0.0.1:20206/ to access the web wallet.</p>\n<h2>Host it to a public web server</h2>\n<p>In fact, host it to a public web server is almost the same as run a remote node, please read <a href=\"https://lifetyper.com/posts/run_remote_node_for_dero_wallet.html\">my previous article</a> for the detailed guide.</p>\n<h2>My Dero Web Wallet</h2>\n<p>So, here is my public <a href=\"https://derowallet.com/\">dero web wallet</a> you can use for free.No private data will be send to my server, since web wallet server works just like a remote node.</p>", "description": "Dero nightly build has already support a very useful new funtion:Web Wallet.It's archived by using golang web assembly build,totally run in your browser.As mentioned by dero dev team, dero gui wallet will be abandoned, all resouce will focused on web wallet.", "date_published": "2018-11-26T10:55:00+08:00"}, {"id": "tag:None,2018-10-18:posts/run_remote_node_for_dero_wallet.html", "url": "posts/run_remote_node_for_dero_wallet.html", "title": "How to run a remote node for DERO wallet", "content_html": "<h2>Why do you need a remote node?</h2>\n<p>One of the <a href=\"https://dero.io\">dero</a> wallet's greatest feature is remote node function,which allows you to sync and use your DERO wallet without sync the whole blockchain.Currently there is only one public node is run by dero Official(https://rwallet.dero.live:443).</p>\n<p>But a centralized server can crash or the network latency may too large for you due to different network condition, or even worse,you don't trust anyone else except yourself, you might want to run your own remote node for your wallet.</p>\n<h2>What do you need for a remote node</h2>\n<p>Here below is what you will need for running a remote node:</p>\n<ol>\n<li>A VPS with public IPV4 address, running ubuntu or debian </li>\n<li>A domain for SSL certificate</li>\n<li>Done</li>\n</ol>\n<p>Then you can create your remote node following below step.</p>\n<h2>Setup your domain</h2>\n<p>This step is simple, just point your domain to your VPS's IP address,blabla...If any trouble with this part, ask your domain registar for help.</p>\n<h2>Install Nginx</h2>\n<p>Nginx is a famous http server which can also works a web proxy, here we use nginx to proxy dero daemon's default rpc service from port 127.0.0.1:20206 to 0.0.0.0:443(port for https web) and expose to public.\nInstall nginx is easy on ubuntu, install with root account is ok, but don't run it under root account.</p>\n<div class=\"highlight\"><pre><span></span>apt-get update\napt-get install nginx\n</pre></div>\n\n\n<h2>Fetch SSL certificate for your domain</h2>\n<p>We have let's encrypt for free SSL certificate, to obtain SSL certificate easyliy we shall install <a href=\"https://certbot.eff.org/\">certbot</a>.</p>\n<div class=\"highlight\"><pre><span></span>apt-get update\napt-get install software-properties-common\nadd-apt-repository ppa:certbot/certbot\napt-get update\napt-get install python-certbot-nginx \n</pre></div>\n\n\n<p>After installation, run below command to get the ssl certificate</p>\n<div class=\"highlight\"><pre><span></span>certbot certonly\n</pre></div>\n\n\n<p>Just follow the instruction and enter needed info, and when it comes to this step:</p>\n<div class=\"highlight\"><pre><span></span>How would you like to authenticate with the ACME CA?\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n1: Nginx Web Server plugin - Alpha (nginx)\n2: Spin up a temporary webserver (standalone)\n3: Place files in webroot directory (webroot)\n</pre></div>\n\n\n<p>Just type \"1\" to use nginx web plugin for domain verify.\nAfter certificate done, take derowallet.com for example, you shall see below message telling you where is your certification and chain stored.</p>\n<div class=\"highlight\"><pre><span></span>- Congratulations! Your certificate and chain have been saved at:\n   /etc/letsencrypt/live/derowallet.com/fullchain.pem\n   Your key file has been saved at:\n   /etc/letsencrypt/live/derowallet.com/privkey.pem\n</pre></div>\n\n\n<p>Note down these two paths, we will use them later.</p>\n<h2>Setup Nginx as DERO rpc service proxy</h2>\n<p>Still take derowallet.com for example, let's create a config file for this proxy in \"/etc/nginx/conf.d\" and edit it with VIM:\n<code>touch rwallet.conf\nvi rwallet.conf</code>\nThen paste below content in rwallet.conf:</p>\n<div class=\"highlight\"><pre><span></span><span class=\"nt\">server</span> <span class=\"p\">{</span>\n    <span class=\"err\">listen</span>          <span class=\"err\">80</span><span class=\"p\">;</span>\n    <span class=\"err\">server_name</span>     <span class=\"err\">derowallet.com</span><span class=\"p\">;</span>\n    <span class=\"err\">rewrite</span> <span class=\"err\">^/(.*)</span>  <span class=\"n\">https</span><span class=\"p\">:</span><span class=\"o\">//</span><span class=\"n\">derowallet</span><span class=\"o\">.</span><span class=\"n\">com</span><span class=\"o\">/</span><span class=\"err\">$</span><span class=\"mi\">1</span> <span class=\"n\">permanent</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"nt\">server</span> <span class=\"p\">{</span>\n    <span class=\"err\">listen</span>          <span class=\"err\">443</span> <span class=\"err\">ssl</span><span class=\"p\">;</span>\n    <span class=\"err\">server_name</span>     <span class=\"err\">derowallet.com</span><span class=\"p\">;</span>\n    <span class=\"err\">access_log</span>      <span class=\"err\">/var/log/nginx/rwalelt_access.log</span> <span class=\"err\">combined</span><span class=\"p\">;</span>\n    <span class=\"err\">error_log</span>       <span class=\"err\">/var/log/nginx/rwallet_erro.log</span> <span class=\"err\">error</span><span class=\"p\">;</span>\n\n    <span class=\"err\">ssl_certificate</span> <span class=\"err\">/etc/letsencrypt/live/derowallet.com/fullchain.pem</span><span class=\"p\">;</span>\n    <span class=\"err\">ssl_certificate_key</span> <span class=\"err\">/etc/letsencrypt/live/derowallet.com/privkey.pem</span><span class=\"p\">;</span>\n\n\n    <span class=\"err\">location</span> <span class=\"err\">/</span> <span class=\"err\">{</span>\n        <span class=\"err\">proxy_pass</span>         <span class=\"n\">http</span><span class=\"p\">:</span><span class=\"o\">//</span><span class=\"n\">localhost</span><span class=\"o\">:</span><span class=\"mi\">20206</span><span class=\"o\">/</span><span class=\"p\">;</span>\n        <span class=\"err\">proxy_redirect</span>     <span class=\"err\">off</span><span class=\"p\">;</span>\n\n        <span class=\"err\">proxy_set_header</span>   <span class=\"err\">Host</span>              <span class=\"err\">$http_host</span><span class=\"p\">;</span>\n        <span class=\"err\">proxy_set_header</span>   <span class=\"err\">X-Real-IP</span>         <span class=\"err\">$remote_addr</span><span class=\"p\">;</span>\n        <span class=\"err\">proxy_set_header</span>   <span class=\"err\">X-Forwarded-For</span>   <span class=\"err\">$proxy_add_x_forwarded_for</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n\n<span class=\"err\">}</span>\n</pre></div>\n\n\n<p>Remember to replace derowallet.com with your own domain, and set the correct path for your ssl certificate and chain, then restart nginx service:</p>\n<div class=\"highlight\"><pre><span></span>/etc/init.d/nginx restart\n</pre></div>\n\n\n<p>Now let's visit <a href=\"https://derowallet.com\">https://derowallet.com</a> you should see a \"502 bad gateway\" error.This means nginx is working as expected, the only problem is you haven't run dero daemon at port 20206 yet.</p>\n<h2>Run dero daemon</h2>\n<h3>install dero daemon</h3>\n<p>First let's go to <a href=\"https://github.com/deroproject/derosuite/releases/latest\">dero official github</a> to download the latest binaries for dero daemon.\nSince we're using ubuntu 16.04 64bit as our VPS os here, we should download linux_amd64 version, extract the tarball and copy the binaries to \"/usr/local/bin\" folder to make it global available.</p>\n<div class=\"highlight\"><pre><span></span>wget https://github.com/deroproject/derosuite/releases/download/v2.1.5/dero_linux_amd64_2.1.5-0.alpha.atlantis.10102018.tar.gz\ntar xf dero_linux_amd64_2.1.5-0.alpha.atlantis.10102018.tar.gz\ncp dero_linux_amd64/* /usr/local/bin\n</pre></div>\n\n\n<h3>Create data folder for dero</h3>\n<p>Let's make a folder for dero to store the chain data:</p>\n<div class=\"highlight\"><pre><span></span>mkdir /root/.dero\n</pre></div>\n\n\n<p>using name like \".dero\" with a dot in the front will make the folder default hidden for 'ls' command and avoid stupid \"rm -rf\" command delete it.</p>\n<h3>Run dero daemon</h3>\n<p>Since we create a folder(/root/.dero) for blockchain data store, we should use this folder as data-dir every time we run dero daemon.</p>\n<div class=\"highlight\"><pre><span></span>derod-linux-amd64 --data-dir=/root/.dero\n</pre></div>\n\n\n<p>After this command you should see dero command line daemon start and a folder named \"mainnet\" created under \"/root/.dero\" folder.\nThis time when you visit https://derowallet.com, browser should return a \"Hello world!\" message, which means everything is done.</p>\n<h3>Make dero daemon autostart and run in background</h3>\n<p>Dero daemon is an interactive command line program, the most easy way to run it in background is using screen command.</p>\n<div class=\"highlight\"><pre><span></span>screen -d -m derod-linux-amd64 --data-dir=/root/.dero\n</pre></div>\n\n\n<p>Now a new sub-shell has been created and dero daemon running in it, if you want to check the staus of this sub-shell, just type:</p>\n<div class=\"highlight\"><pre><span></span>screen -r\n</pre></div>\n\n\n<p>if there're more than one sub-shell running on your server, you might need to use </p>\n<div class=\"highlight\"><pre><span></span>screen -ls\n</pre></div>\n\n\n<p>to list all running sub-shell and determine which one to enter.\nif you want to leave the sub-shell, don't use ctrl+c which will end the daemon, use key \"ctrl+a+d\" and you shall return to main shell.</p>\n<p>To make the daemon auto start when we restart the server, place the command we run daemon in file \"/etc/rc.local\", edit this file so finally it may looks like:</p>\n<div class=\"highlight\"><pre><span></span># rc.local\n#\n# This script is executed at the end of each multiuser runlevel.\n# Make sure that the script will &quot;exit 0&quot; on success or any other\n# value on error.\n#\n# In order to enable or disable this script just change the execution\n# bits.\n#\n# By default this script does nothing.\n\n/usr/bin/screen -d -m /usr/local/bin/derod-linux-amd64 --data-dir=/root/.dero\n\nexit 0\n</pre></div>\n\n\n<p>Note that this time we shall use full path for both screen and dero daemon.Restart the server and check https://derowallet.com to see if it works.</p>\n<h2>Using remote node</h2>\n<p>Currently dero GUI wallet doesn't support customized remote node, but we can use it for command line wallet, by using option --data-dir.</p>\n<p>Full command to use the remote node we just set up under mac os is:</p>\n<div class=\"highlight\"><pre><span></span>dero-wallet-cli-darwin-amd64 --daemon-address=https://derowallet.com\n</pre></div>\n\n\n<p>If your node is full synced, your wallet should be ready for use now.</p>", "description": "One of the dero wallet's greatest feature is remote node function,which allows you to sync and use your DERO wallet without sync the whole blockchain.", "date_published": "2018-10-18T16:55:00+08:00"}, {"id": "tag:None,2018-07-22:posts/blog_moved_to_github_pages_and_domain_config.html", "url": "posts/blog_moved_to_github_pages_and_domain_config.html", "title": "\u8fc1\u79fb\u5230GithubPages\u540e\u7684\u57df\u540d\u8bbe\u7f6e\u95ee\u9898", "content_html": "<p>\u57fa\u672c\u4e0a\u6211\u4e00\u5e74\u4e5f\u5199\u4e0d\u4e86\u4e00\u7bc7\u6587\u7ae0\uff0c\u670d\u52a1\u5668\u4e3b\u8981\u662f\u62ff\u6765\u7ffb\u5899\u7684\uff0c\u78b0\u4e0a\u670d\u52a1\u5668\u901f\u5ea6\u53d8\u6162\u4e86\u5c31\u5f97\u8fc1\u79fb\u4e00\u6b21\uff0c\u867d\u7136\u5df2\u7ecf\u662f\u57fa\u4e8epelican\u7684\u9759\u6001\u7f51\u7ad9\uff0c\u4f46nginx\u8fd8\u662f\u5f97\u91cd\u65b0\u914d\u7f6e\u4e00\u6b21\u3002</p>\n<p>\u521a\u597d\u53d1\u73b0github pages\u5df2\u7ecf\u5bf9custom domain\u5f00\u653ehttps\u529f\u80fd\u4e86\uff0c\u8fd9\u6837\u57fa\u672c\u4e0a\u4e5f\u5c31\u591f\u4e86\u3002\u9759\u6001blog\u57fa\u672c\u4e0a\u8fc1\u79fb\u6ca1\u4ec0\u4e48\u597d\u5e9f\u8bdd\u7684\uff0c\u5c31\u662f\u8fd9\u4e2acustom domain\u7684\u8bbe\u7f6e\u6709\u70b9\u9ebb\u70e6\u3002</p>\n<p>\u5176\u5b9e\u5982\u679c\u6211\u53ea\u9700\u8981\u7ed1\u5b9alifetyper.com\u7684\u8bdd\u4e5f\u6ca1\u4ec0\u4e48\u95ee\u9898\uff0c\u4f46\u6211\u4e00\u76f4\u90fd\u662flifetyper.com\u548cwww.lifetyper.com\u540c\u65f6\u7ed1\u5b9a\u7684\uff0cgithubpages\u4e0a\u8bbe\u7f6e\u7684\u57df\u540d\u662f\u6839\u57df\u540d\uff0c\u5982\u679c\u76f4\u63a5\u628a\u4e24\u4e2a\u57df\u540d\u7684A\u8bb0\u5f55\u90fd\u89e3\u6790\u5230github\u7684\u5730\u5740\uff0c\u7ed3\u679c\u662f\u8bbf\u95eewww\u5b50\u57df\u540d\u7684\u65f6\u5019\u4f1a\u7206\u4e00\u4e2ahttps\u8bc1\u4e66\u9519\u8bef\uff0c\u56e0\u4e3a\u8bc1\u4e66\u662f\u4e3a\u6839\u57df\u540d\u9881\u53d1\u7684\uff0c\u5b50\u57df\u540d\u5e76\u4e0d\u80fd\u76f4\u63a5\u7528\u8fd9\u4e2a\u8bc1\u4e66\u3002</p>\n<p>\u627e\u4e86\u4e00\u4e0b\u53d1\u73b0\u8fd9\u4e2a\u95ee\u9898\u5176\u5b9e\u7528cloudflare\u7684DNS\u5f88\u597d\u89e3\u51b3\u3002\u9996\u5148\u8981\u8bbe\u7f6e\u6839\u57df\u540d\u7684A\u8bb0\u5f55\u5230Github\uff0c\u8ba9lifetyper.com\u6b63\u5e38\u8bbf\u95ee\uff0c\u7136\u540e\u7ed9www\u5b50\u57df\u540d\u8bbe\u7f6e\u4e00\u4e2apage rules.</p>\n<p>\u4f8b\u5982\u6211\u5e0c\u671b\u628a\u6709\u6240www.lifetyper.com\u7684\u8bbf\u95ee\u90fd\u8f6c\u79fb\u5230lifetyper.com\uff0c\u540c\u65f6\u4fdd\u6301\u94fe\u63a5\u4e0d\u6389\uff0c\u53ef\u4ee5\u8fd9\u6837\u8bbe\u7f6e\uff1a</p>\n<blockquote>\n<p>url description:*www.lifetyper.com/*</p>\n<p>forwarding url:https://lifetyper.com/$2</p>\n</blockquote>\n<p>\u8fd9\u91cc$2\u8868\u793a\u66ff\u6362\u4e3a\u7b2c\u4e8c\u4e2a\u901a\u914d\u7b26*\u7684\u503c\uff0c\u540c\u7406\uff0c\u53ef\u4ee5\u7528\u7f8e\u5143\u7b26+\u6570\u5b57\u5339\u914d\u591a\u4e2a\u901a\u914d\u7b26\u3002</p>\n<p>\u4f46\u8fd9\u6837\u7684\u8bbe\u7f6e\u662f\u4e0d\u591f\u7684\uff0c\u56e0\u4e3awww.lifetyper.com\u5e76\u6ca1\u6709\u4efb\u4f55DNS\u8bb0\u5f55\uff0ccloudflare\u4e0d\u80fd\u63a5\u7ba1\u4e00\u4e2a\u6ca1\u6709\u4efb\u4f55\u8bb0\u5f55\u7684\u57df\u540d\uff0c\u6240\u4ee5\u9700\u8981\u7ed9www.lifetyper.com\u8bbe\u7f6e\u4e00\u6761CNAME\u8bb0\u5f55\uff0c\u503c\u4e3a@\uff0c\u540c\u65f6\u4fdd\u8bc1\u8fd9\u6761\u8bb0\u5f55\u662fDNS&amp;HTTP Proxied By Cloudflare\u7684\u6a59\u8272\u3002</p>\n<p>\u90fd\u8bbe\u7f6e\u6210\u529f\u540e\uff0c\u7a0d\u7b49\u4e00\u6bb5\u65f6\u95f4\u5c31\u53ef\u4ee5\u751f\u6548\u4e86\uff0c\u8fd9\u6837\u6240\u6709\u7684\u8bbf\u95ee\u90fd\u88ab\u5bfc\u5411\u6839\u57df\u540d\u4e86\u3002</p>", "description": "\u57fa\u672c\u4e0a\u6211\u4e00\u5e74\u4e5f\u5199\u4e0d\u4e86\u4e00\u7bc7\u6587\u7ae0\uff0c\u670d\u52a1\u5668\u4e3b\u8981\u662f\u62ff\u6765\u7ffb\u5899\u7684\uff0c\u78b0\u4e0a\u670d\u52a1\u5668\u901f\u5ea6\u53d8\u6162\u4e86\u5c31\u5f97\u8fc1\u79fb\u4e00\u6b21\uff0c\u867d\u7136\u5df2\u7ecf\u662f\u57fa\u4e8epelican\u7684\u9759\u6001\u7f51\u7ad9\uff0c\u4f46nginx\u8fd8\u662f\u5f97\u91cd\u65b0\u914d\u7f6e\u4e00\u6b21\u3002\u3002\u3002", "date_published": "2018-07-22T16:55:00+08:00"}, {"id": "tag:None,2017-04-02:posts/build_your_own_x86_router.html", "url": "posts/build_your_own_x86_router.html", "title": "\u5236\u4f5c\u4f60\u81ea\u5df1\u7684\u7ec8\u6781X86\u8f6f\u8def\u7531", "content_html": "<h2>\u539f\u56e0</h2>\n<p>\u81ea\u4ece\u5f53\u5e74\u88ab<a href=\"https://code.google.com/archive/p/autoddvpn/\">AutoddVPN</a>\u9879\u76ee\u5e26\u5165\u8def\u7531\u5668\u7ffb\u5899\u7684\u5751\uff0c\u65ad\u65ad\u7eed\u7eed\u4e70\u8fc7\u7684\u8def\u7531\u5668\u6709\u5dee\u4e0d\u591a\u4e8c\u5341\u6765\u4e2a\u4e86\u3002\u4ece\u6700\u4f4e\u7aef\u7684400Mhz\u5355\u6838\u7684Atheros\u82af\u7247\u5230\u53cc\u68381G\u7684\u9ad8\u7aef\u8def\u7531\uff0c\u4ece\u5c0f\u5230\u53ea\u6709\u706b\u67f4\u76d2\u5927\u5c0f\u7684WT-32020\u5230\u6bd4\u7816\u5934\u8fd8\u5927\u7684R7000\uff0c\u57fa\u672c\u90fd\u73a9\u4e86\u4e2a\u904d\uff0c\u4f46\u4e5f\u90fd\u5f88\u65e0\u804a\uff0c\u56e0\u4e3a\u6700\u7ec8\u90fd\u662f\u5237openwrt\u6216\u8005dd-wrt\uff0c\u540e\u8005\u7684\u53ef\u73a9\u6027\u5176\u5b9e\u8fd8\u66f4\u5dee\u3002</p>\n<p>\u76f4\u5230\u5e74\u521d\u5165\u4e86EdgerouterX\uff0c\u624d\u53d1\u73b0\u8def\u7531\u53ea\u505a\u8def\u7531\uff0c\u65e0\u7ebf\u4ea4\u7ed9AP\uff0c\u914d\u5408\u4e0alinux\u7cfb\u7edf\u624d\u662f\u771f\u6b63\u7684\u8def\u7531\u5668\u738b\u9053\u3002\u5404\u53f8\u5176\u804c\u53ef\u4ee5\u5145\u5206\u53d1\u6325\u5404\u4e2a\u73af\u8282\u7684\u9876\u7ea7\u6027\u80fd\uff0c\u8d8a\u63a5\u8fd1\u539f\u751flinux\u7684\u7cfb\u7edf\u4e5f\u8d8a\u5bb9\u6613\u89e3\u51b3\u5404\u7c7b\u8f6f\u4ef6\u7684\u5b89\u88c5\u95ee\u9898\uff0c\u9700\u8981\u7684\u8f6f\u4ef6\u5305\u751a\u81f3\u53ef\u4ee5\u76f4\u63a5\u5728\u8def\u7531\u5668\u4e0a\u7f16\u8bd1\u548c\u90e8\u7f72\u3002</p>\n<p>\u867d\u7136\u57fa\u4e8eASIC\u82af\u7247\u7684\u8def\u7531\u5728\u6548\u7387\u4e0a\u66f4\u9ad8\uff0c\u53ef\u4ee5\u7528\u66f4\u4f4e\u7684\u4e3b\u9891\u5b9e\u73b0\u767e\u5146\u751a\u81f3\u5343\u5146\u7684\u8f6c\u53d1\uff0c\u4f46\u90a3\u662f\u5728\u8def\u7531\u4e3b\u63a7CPU\u666e\u904d\u4e3b\u9891\u53ea\u6709300~400Mhz\u7684\u65f6\u4ee3\u7684\u5fc5\u9700\u4ea7\u7269\u3002\u5f53Intel\u628a\u53cc\u6838\u3001\u56db\u6838\u7684x86\u529f\u7387\u505a\u5230\u4e2a\u4f4d\u6570\u4ee5\u540e\uff0c\u76f4\u63a5\u7528\u9ad8\u6027\u80fd\u7684x86\u642d\u5efa\u8def\u7531\u5df2\u7ecf\u7edd\u5bf9\u662f\u6027\u80fd\u6ea2\u51fa\u7684\u9009\u62e9\u3002</p>\n<p>\u4ece\u6027\u4ef7\u6bd4\u4e0a\u8bf4\uff0c\u73b0\u5728\u7684\u9ad8\u7aef\u8def\u7531\u666e\u904d\u4ef7\u683c\u57281000\u5143\u4ee5\u4e0a\uff0c\u90e8\u5206\u751a\u81f3\u8fbe\u5230\u4e862000~3000\u5143\u7684\u8303\u56f4\uff0c\u5f53\u8def\u7531\u5668\u4ef7\u683c\u8fbe\u5230\u8fd9\u4e2a\u8303\u56f4\u7684\u65f6\u5019\u6211\u5c31\u5f88\u96be\u7406\u89e3\u4e3a\u4ec0\u4e48\u8fd8\u8981\u53bb\u4e70\u8fd9\u79cd\u4e00\u4f53\u5316\u7684\u9ad8\u7aef\u8def\u7531\u4e86\u3002\u4e00\u53f0X86\u5c0f\u4e3b\u673a\u7684\u4ef7\u683c\u4e00\u822c\u4e0d\u8d85\u8fc71000\u5143\uff0c\u52a01000\u5143\u53ef\u4ee5\u4e70\u4e00\u4e2a\u9876\u7ea7\u7684ubnt\u7684AP\uff0c2000\u5143\u5c31\u53ef\u4ee5\u7ed9\u4f60\u5e26\u4e86\u6700\u597d\u7684\u7ec4\u5408\u4e86\uff0c\u4e3a\u4ec0\u4e48\u8fd8\u8981\u4e70\u8fd9\u79cd\u73b0\u8d27\u8def\u7531?</p>\n<h2>\u786c\u4ef6\u90e8\u5206</h2>\n<h3>\u4e3b\u673a\u7684\u9009\u62e9</h3>\n<p>\u611f\u8c22\u4e07\u80fd\u7684\u6dd8\u5b9d\uff0c\u6211\u5728\u4e0a\u9762\u627e\u5230\u4e86\u4e00\u6b3e\u67094\u4e2a\u5343\u5146\u4ee5\u592a\u7f51\u548c\u4e00\u4e2aRF45\u63a5\u53e3\u5f62\u5f0f\u7684RS232\u4e32\u53e3\u7684J1900 CPU\u7684\u5c0f\u4e3b\u673a\uff0c\u5e97\u94fa\u672c\u8eab\u5bf9\u8fd9\u8d27\u7684\u5b9a\u4e49\u5c31\u662f\u8f6f\u8def\u7531\u4e3b\u673a\u3002\u8fd9\u4e2a\u5b8c\u5168\u6ee1\u8db3\u6211\u7684\u9700\u6c42\uff1a</p>\n<p><img alt=\"J1900\u8f6f\u8def\u7531\" src=\"images/j1900_x86_router.png\"></p>\n<ol>\n<li>\u53ea\u8981\u6709\u7ebf\u8def\u7531\u529f\u80fd\uff0c\u65e0\u7ebf\u529f\u80fd\u53ef\u4ee5\u4ea4\u7ed9\u4e13\u4e1a\u7684AP\u53bb\u5904\u7406\u3002</li>\n<li>\u91d1\u5c5e\u673a\u8eab\u4e14\u4f53\u79ef\u5c0f\u5de7(15cmx13cmx3cm)\uff0c\u6bd4\u5f88\u591a\u5916\u58f3\u662f\u5851\u6599\u4f46\u91cc\u9762\u5168\u662f\u7a7a\u6c14\u7684\u5bb6\u5ead\u8def\u7531\u8fd8\u8981\u5c0f\uff0c\u53ef\u4ee5\u8f7b\u677e\u653e\u8fdb\u5f31\u7535\u7bb1\uff0c\u53cd\u6b63\u4e0d\u6d89\u53ca\u65e0\u7ebf\uff0c\u4e0d\u62c5\u5fc3\u4fe1\u53f7\u8870\u51cf\u3002</li>\n<li>\u5e26\u6709RS232\u63a5\u53e3\u4fbf\u4e8e\u8c03\u8bd5\uff0c\u867d\u7136SSH\u767b\u5f55\u662f\u5f88\u65b9\u4fbf\u7684\uff0c\u4f46\u4e00\u4e2aIPtables\u547d\u4ee4\u9519\u8bef\u540e\u4f60\u5c31\u53ef\u4ee5\u628a\u81ea\u5df1\u6321\u5728\u4e86\u8def\u7531\u5668\u4e4b\u5916\uff0c\u8fd9\u4e2a\u65f6\u5019\u4f60\u7edd\u5bf9\u4e0d\u5e0c\u671b\u9700\u8981\u63d2\u4e0a\u952e\u76d8\u548c\u663e\u793a\u5668\u624d\u80fd\u8c03\u8bd5\u3002</li>\n<li>J1900\u4e5f\u5c31\u662fBay Trail\u5e73\u53f0\u5176\u5b9e\u5df2\u7ecf\u597d\u51e0\u5e74\u4e86\uff0c\u8fd9\u4e2a\u5e73\u53f0\u7684\u5f00\u53d1\u5e94\u7528\u975e\u5e38\u591a\u4e5f\u5f88\u6210\u719f\uff0clinux\u7684\u652f\u6301\u4e5f\u5f88\u5b8c\u7f8e\u3002</li>\n</ol>\n<p>\u8fd9\u4e2a\u5c0f\u4e3b\u673a\u57fa\u672c\u662f\u5b8c\u7f8e\u7684\uff0c\u9664\u4e86\u4e00\u4e2a\u5730\u65b9:\u4e32\u53e3\u3002\u8fd9\u5176\u5b9e\u662f\u4e2a\u5f88\u5c34\u5c2c\u7684\u4e0d\u6ee1\uff0c\u56e0\u4e3a\u673a\u5668\u4e0a\u7684\u4e32\u53e3\u662f\u6309\u7167\u6807\u51c6\u7684EIA-561\u6807\u6ce8\u6765\u63a5\u7684\uff0c\u8fd9\u770b\u8d77\u6765\u5f88\u5408\u7406\uff0c\u95ee\u9898\u662f\u8fd9\u5e74\u5934\u4f60\u4e00\u65e6\u628a\u4e32\u53e3\u505a\u6210RJ45\u7684\u63a5\u53e3\uff0c10\u53f0\u673a\u5668\u67099\u53f0\u90fd\u662f\u6309\u7167\u601d\u79d1\u7684\u90a3\u5957\u6807\u51c6\u6765\u63a5\u7684\u3002\u4ee5\u81f3\u4e8e\u4f60\u73b0\u5728\u53bb\u4e70USB Console\u8c03\u8bd5\u7ebf\uff0c\u53ea\u80fd\u4e70\u5230\u601d\u79d1\u6807\u51c6\u7684\u7ebf\uff0cEIA-561\u6807\u51c6\u7684\u7ebf\u53ea\u80fd\u81ea\u5df1\u505a\uff0c\u5982\u679c\u7528\u601d\u79d1\u7684Console\u7ebf\u53bb\u8c03\u8bd5\uff0c\u4f60\u4f1a\u53d1\u4e0b\u4ece\u4e3b\u673a\u51fa\u6765\u7684TX\u662f\u597d\u7684\uff0c\u4f46RX\u6c38\u8fdc\u6536\u4e0d\u5230\u6570\u636e\u3002</p>\n<p>\u4e8e\u662f\u6211\u627e\u4e86\u4e00\u6839\u94dc\u82af\u6bd4\u8f83\u786c\u7684\u7f51\u7ebf\uff0c\u4ece\u5b9e\u9a8c\u5ba4\u7ffb\u51fa\u4e00\u4e2aDB9\u6bcd\u5934\u548c\u5851\u6599\u5361\u58f3\uff0c\u81ea\u5df1\u505a\u4e86\u4e00\u4e2aRJ45\u8f6cDB9\u6bcd\u5934\u7684\u8f6c\u63a5\u7ebf\uff0c\u540e\u9762\u518d\u63a5\u4e0a\u666e\u901a\u7684USB\u8f6cDB9\u5de5\u5934\u7684USB\u4e32\u53e3\u7ebf\u5c31\u53ef\u4ee5\u4e86\u3002\u5176\u5b9eRJ45\u8f6cDB9\u90a3\u91cc\uff0c\u53ea\u9700\u8981\u628a\u5730\u7ebf\u548cTX\u3001RX\u4e09\u6839\u7ebf\u63a5\u51fa\u6765\u5c31\u53ef\u4ee5\u4e86\uff0c\u56e0\u4e3a\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u6211\u4eec\u5e76\u4e0d\u4f1a\u7528\u5230\u6d41\u63a7\u3002</p>\n<p><img alt=\"RJ45\u8f6cDB9\u6bcd\u5934\" src=\"images/rj45_to_db9_female.png\"></p>\n<h3>\u8fd9\u91cc\u7b80\u5355\u8bf4\u4e00\u4e0bRJ45\u8f6cDB9\u8be5\u600e\u4e48\u63a5\u7ebf:</h3>\n<ol>\n<li>\u9996\u5148\u660e\u786e\u6211\u4eec\u4e0d\u7528\u6d41\u63a7\uff0c\u53ea\u9700\u8981\u627eGND\\TX\\RX\u4e09\u6839\u7ebf\u3002</li>\n<li>DB9\u4e0a\u7684GND\u662f\u7b2c5pin,\u7b2c\u51e0Pin\u5728\u54ea\u91cc\uff0cDB9\u4e0a\u90fd\u4f1a\u6709\u4e1d\u5370\u544a\u8bc9\u4f60\u7684\uff0c\u5f88\u5bb9\u6613\u627e\u3002</li>\n<li>RJ45\u4e0a\u627eGND\u4e5f\u5f88\u7b80\u5355\uff0c\u7528\u4e07\u7528\u8868\u7684\u901a\u65ad\u6d4b\u8bd5\u6863\uff0c\u4e00\u7aef\u63a5RJ45\u7684\u5916\u58f3\uff0c\u53e6\u4e00\u7aef\u4e00\u6839\u6839\u7684\u8bd5\uff0c\u5bfc\u901a\u7684\u5c31\u662f\u63a5\u5730\u7684GND\u3002</li>\n<li>DB9\u4e0a\u7684RX/TX\u662f2/3 Pin\uff0c\u8fd9\u4e48\u591a\u5e74\u4ee5\u6765\u6211\u4e00\u76f4\u90fd\u5bf9RX/TX\u7684\u5b9a\u4e49\u5f88\u56f0\u6270\uff0c\u56e0\u4e3a\u9488\u5bf9\u4e0d\u540c\u7684\u4e3b\u4ece\u8bbe\u5907\uff0cRX\u548cTX\u6839\u672c\u5c31\u662f\u4e2a\u6df7\u6dc6\u7684\u6982\u5ff5\uff0c\u6211\u7684RX\u5c31\u662f\u4f60\u7684TX\uff0c\u4f60\u7684RX\u5c31\u662f\u6211\u7684TX\uff0c\u8fd9\u91cc\u6211\u4eec\u5148\u4e0d\u7ba1\uff0c\u627e\u51fa2/3Pin\u518d\u8bf4\u3002</li>\n<li>RJ45\u4e0a\u7684TX/RX\u600e\u4e48\u627e\uff0c\u5982\u679c\u6709\u793a\u6ce2\u5668\u5f53\u7136\u5c31\u662f\u4e00\u5206\u949f\u7684\u4e8b\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u53ea\u80fd\u627e\u6839\u7535\u7ebf\uff0c\u4e24\u6839\u4e24\u6839\u7684\u77ed\u63a5\uff0c\u5f53\u7136\u524d\u9762\u627e\u5230\u7684GND\u53ef\u4ee5\u5148\u6392\u9664\u3002\u6807\u51c6\u7684EI-561\u63a5\u6cd5\u4e2dRX/TX\u662f\u76f8\u90bb\u7684\uff0c\u6240\u4ee5\u4ece\u6c34\u6676\u5934\u90a3\u91cc\u53ef\u4ee5\u5f88\u5bb9\u6613\u7684\u627e\u51fa\u54ea\u4e9b\u662f\u76f8\u90bb\u7684\uff0c\u8bd5\u51e0\u6b21\u5c31\u53ef\u4ee5\u4e86\u3002\u5728Linux\u4e2d\u5f00\u4e24\u4e2aconsole,\u4e00\u4e2a\u4e0d\u505c\u7684\u5f80/dev/ttyS0\u5199\u6570\u636e\uff0c\u4e00\u4e2acat /dev/ttyS0\uff0c\u5f53RX/TX\u77ed\u63a5\u65f6\uff0c\u4f60\u5c31\u53ef\u4ee5\u5728cat /dev/ttyS0\u7684\u7a97\u53e3\u770b\u5230\u81ea\u5df1\u5199\u5165\u7684\u6570\u636e\u4e86\u3002</li>\n<li>\u73b0\u5728\u4f60\u77e5\u9053\u4e86DB9\u548cRJ45\u4e0a\u7684RX/TX\u662f\u54ea\u4e24\u7ec4Pin\u4e86\uff0c\u4f46\u5177\u4f53\u8c01\u662fTX\u8c01\u662fRX\u5e76\u4e0d\u6e05\u695a\uff0c\u4e0d\u91cd\u8981\uff0c\u53cd\u6b63\u5c31\u4e24\u79cd\u7ec4\u5408\uff0c\u5728\u710a\u6b7b\u4e4b\u524d\u8bd5\u4e00\u6b21\u4e0d\u5c31\u884c\u4e86\uff0c\u770b\u8d77\u6765\u5f88\u50bb\uff0c\u4f46\u8fd9\u6837\u6548\u7387\u6700\u9ad8\u3002</li>\n</ol>\n<h2>\u8f6f\u4ef6\u90e8\u5206</h2>\n<h3>\u7cfb\u7edf\u7684\u9009\u62e9\u4e0e\u5b89\u88c5</h3>\n<p>\u5176\u5b9e\u6211\u521a\u5f00\u59cb\u7684\u65f6\u5019\u5f88\u60f3\u7528<a href=\"https://vyos.io\">Vyos</a>\uff0c\u8fd9\u4e2a\u7cfb\u7edf\u5176\u5b9e\u5c31\u662fEdgeRouter\u7684EdgeOS\u7684\u5f00\u6e90\u7248\u672c\uff0c\u57fa\u4e8eDebian\u6784\u5efa\u3002\u800c\u4e14\u65b0\u6d4b\u8bd5\u7248\u7684Vyos\u662f\u57fa\u4e8eDebian Jessie\u7684\uff0c\u975e\u5e38\u65b0\uff0c\u8f6f\u4ef6\u652f\u6301\u540e\u671f\u4f1a\u5f88\u65b9\u4fbf\u3002</p>\n<p>\u4f46\u6700\u540e\u653e\u5f03\u7684\u539f\u56e0\u662f\uff0c\u6d4b\u8bd5\u7248\u786e\u5b9e\u4e0d\u7a33\u5b9a\u554a\uff0c\u6211\u8fde\u7740\u8bd5\u4e86\u4e24\u5929\u7684test build\uff0c\u5b89\u88c5\u540e\u5168\u90e8\u5361\u5728\u4e86grub menu\u90a3\u91cc\u65e0\u6cd5\u8fdb\u5165\u7cfb\u7edf\u3002old stable\u7248\u672c\u867d\u7136\u5b89\u88c5\u6ca1\u95ee\u9898\u4e5f\u80fd\u5de5\u4f5c\uff0c\u4f46\u5b83\u662f\u57fa\u4e8edeian squeeze\u7684\uff0csqueeze\u8fdeLTS\u652f\u6301\u90fd\u7ed3\u675f\u4e86\u554a\uff0c\u5b9e\u5728\u4e0d\u80fd\u5fcd\u3002</p>\n<p>\u6700\u540e\uff0c\u6211\u51b3\u5b9a\u56de\u5230\u6b63\u5e38\u7684linux\u53d1\u578b\u7248\u6765\uff0c\u6700\u7ec8\u7684\u9009\u62e9\u662fDebian Jessie amd64\u7248\u672c\u3002\u6211\u670d\u52a1\u5668\u672c\u8eab\u7684\u64cd\u4f5c\u7cfb\u7edf\u5c31\u662fdebian\uff0c\u4e00\u76f4\u7528\u6765\u7f16\u8bd1shadowsocks server\uff0c\u975e\u5e38\u7684\u65b9\u4fbf\uff0c\u5176\u5b9eubuntu\u5e94\u8be5\u4e5f\u5dee\u4e0d\u591a\uff0c\u53ea\u662f\u4e2a\u4eba\u559c\u597d\u4e86\u3002</p>\n<p>\u5b89\u88c5\u8fc7\u7a0b\u6ca1\u592a\u591a\u597d\u8bf4\u7684\uff0c\u53ea\u662f\u6700\u540e\u9009\u62e9\u7ec4\u4ef6\u7684\u65f6\u5019\u5efa\u8bae\u4e0d\u8981\u5b89\u88c5\u684c\u9762\u73af\u5883\uff0c\u7eaf\u7cb9\u662f\u6d6a\u8d39\uff0c\u9664\u975e\u4f60\u60f3\u8981\u8fd9\u4e2a\u673a\u5668\u5728\u505a\u8def\u7531\u7684\u540c\u65f6\u4e5f\u505aHTPC\u7528\uff0c\u95ee\u9898\u662f\uff0c\u8fd9\u8d27\u53ea\u6709VGA\u8f93\u51fa\u6ca1\u6709\u97f3\u9891\u8f93\u51fa\u554a\uff0c\u505aHTPC\u4e5f\u4e0d\u73b0\u5b9e\u561b\u3002SSH-Server\u8fd8\u662f\u88c5\u4e0a\uff0c\u6bd5\u7adf\u7f51\u7ebf\u6bd4\u4e32\u53e3\u7ebf\u65b9\u4fbf\u3002</p>\n<p>\u540e\u671f\u7684\u5f88\u591a\u64cd\u4f5c\u6211\u90fd\u5efa\u8bae\u4f60\u76f4\u63a5\u7528root\u8d26\u53f7\u64cd\u4f5c\uff0c\u56e0\u4e3auser\u6743\u9650\u6839\u672c\u4e0d\u591f\uff0c\u6574\u5929\u7528sudo\u4e0d\u4f1a\u6bd4\u76f4\u63a5\u7528root\u5b89\u5168\u591a\u5c11\uff0c\u53cd\u6b63\u4f60\u4e5f\u4e0d\u770b\u4efb\u4f55warning\u3002</p>\n<h3>\u5f00\u59cbSerial Console</h3>\n<p>\u4e3a\u4ec0\u4e48\u8981\u5f00\u542fSerial Console?\u56e0\u4e3a\u6211\u4eec\u6709\u4e00\u4e2a\u4e32\u53e3...</p>\n<p>\u8fd9\u5f53\u7136\u4e0d\u662f\u5408\u7406\u7684\u7406\u7531\uff0c\u4e3b\u8981\u539f\u56e0\u6709\u4e24\u4e2a\uff0c\u4e00\u4e2a\u662f\u6211\u4eec\u540e\u671f\u7684iptables\u64cd\u4f5c\u53ef\u80fd\u4f1a\u8ba9ssh\u77ed\u671f\u65e0\u6cd5\u8fde\u63a5\uff0c\u53e6\u4e00\u4e2a\u662fserial console\u7684\u5c42\u7ea7\u66f4\u4f4e\uff0c\u51e0\u4e4e\u7b49\u540c\u4e8e\u663e\u793a\u5c4f\uff0c\u53ef\u4ee5\u4fbf\u4e8e\u6211\u4eec\u8c03\u8bd5\u4e00\u4e9b\u5e95\u5c42boot\u4fe1\u606f\u3002</p>\n<p>\u5f00\u542fserial console\u5176\u5b9e\u5f88\u7b80\u5355\uff0c\u53ea\u9700\u8981\u5728grub\u914d\u7f6e\u4e2d\u6dfb\u52a0\u4e00\u4e2aconsole\u5230\u542f\u52a8\u60f3\u5c31\u53ef\u4ee5\u4e86\uff0c\u5177\u4f53\u7684\u65b9\u6cd5\u662f\u7f16\u8f91/etc/default/grub\u6587\u4ef6\uff0c\u4fee\u6539\u540e\u7684\u5185\u5bb9\u5982\u4e0b\uff1a</p>\n<div class=\"highlight\"><pre><span></span>GRUB_DEFAULT=0\nGRUB_TIMEOUT=1\nGRUB_DISTRIBUTOR=`lsb_release -i -s 2&gt; /dev/null || echo Debian`\nGRUB_CMDLINE_LINUX_DEFAULT=&quot;&quot;\nGRUB_CMDLINE_LINUX=&quot;console=tty0 console=ttyS0,115200&quot;\nGRUB_TERMINAL=serial\nGRUB_SERIAL_COMMAND=&quot;serial --speed=115200 --unit=0 --word=8 --parity=no --stop=1&quot;\n</pre></div>\n\n\n<ol>\n<li>\u4fee\u6539GRUB_TIMEOUT\u662f\u4e3a\u4e86\u8282\u7701\u542f\u52a8\u65f6\u95f4</li>\n<li>GRUB_CM_LINE_LINUX\u90a3\u884c\u8868\u793a\u6211\u4eec\u8981\u540c\u4e8b\u5f00\u542f\u4e24\u4e2aconsole\uff0c\u4e00\u4e2a\u662ftty0(\u663e\u793a\u5668)\uff0c\u53e6\u4e00\u4e2a\u662fttyS0(\u4e32\u53e3)\uff0c\u4e32\u53e3\u901f\u7387\u662f115200\u3002</li>\n<li>GRUB_SERIAL_COMMAND\u662f\u8bbe\u5b9a\u4e32\u53e3\u7684\u53c2\u6570\uff0c\u8fd9\u91cc\u662f\u6700\u666e\u901a\u76848\u6bd4\u7279\u6570\u636e\uff0c1\u6bd4\u7279\u505c\u6b62\u4f4d\uff0c\u65e0\u6821\u9a8c\u3002</li>\n</ol>\n<p>\u4fee\u6539\u597d\u4e4b\u540e\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u91cd\u65b0\u751f\u6210grub.cfg\u6587\u4ef6\uff0c\u91cd\u542f\u5c31\u53ef\u4ee5\u770b\u5230serial console\u4e86\u3002</p>\n<div class=\"highlight\"><pre><span></span>grub-mkconfig -o /boot/grub/grub.cfg\n</pre></div>\n\n\n<p>\u5728mac\u7684terminal\u4e0a\uff0c\u53ef\u4ee5\u76f4\u63a5\u7528\u4ee5\u4e0b\u547d\u4ee4\u8fde\u63a5\u5230\u4e32\u53e3console</p>\n<div class=\"highlight\"><pre><span></span>screen /dev/tty.usbXXXX 115200\n</pre></div>\n\n\n<p>\u8fd9\u91cc\u7684XXXX\u4f1a\u56e0\u4e3a\u4e0d\u540c\u7684\u8bbe\u5907\u800c\u4e0d\u540c\uff0c\u662f\u7531\u4f60\u7684USB\u8f6c\u4e32\u53e3\u7ebf\u51b3\u5b9a\u7684\u3002</p>\n<h3>WAN\u4e0eBridge LAN</h3>\n<p>\u8fd9\u91cc\u6211\u628aLAN1\u53e3\u4f5c\u4e3aWAN\u53e3\u6765\u4f7f\u7528\uff0c\u6211\u8fd9\u91cc\u53ea\u8003\u8651WAN\u53e3\u4ece\u4e0a\u6e38\u7684DHCP\u670d\u52a1\u5668\u81ea\u52a8\u83b7\u53d6IP\u7684\u60c5\u51b5\uff0c\u5982\u679c\u9700\u8981WAN\u53e3\u6709PPPOE\u62e8\u53f7\u529f\u80fd\uff0c\u8bf7\u81ea\u884c\u67e5\u627e\u76f8\u5173\u7684\u6587\u6863\u3002</p>\n<p>\u5176\u5b9e\u5728\u9ad8\u7aef\u7684\u5546\u7528\u8def\u6709\u91cc\uff0c\u6bcf\u4e2aLAN\u90fd\u662f\u6709\u4e00\u4e2a\u72ec\u7acb\u7684\u7f51\u6bb5\u7684\uff0c\u8fd9\u6837\u53ef\u4ee5\u7ed9\u4e0d\u540c\u7684\u533a\u57df\u548c\u90e8\u95e8\u5212\u5206\u4e0d\u540c\u7684\u8bbf\u95ee\u533a\u57df\u3002\u4f46\u5728\u5bb6\u7528\u8def\u7531\u91cc\uff0c\u4f60\u7edd\u5bf9\u4e0d\u5e0c\u671b\u624b\u673a\u8fde\u4e0aWIFI\u540e\u548c\u8bbf\u95ee\u4e0d\u4e86\u5728\u53e6\u4e00\u4e2a\u7f51\u6bb5\u91cc\u7684NAS\u3002\u6240\u4ee5\u6211\u4eec\u8981\u628aLAN2,LAN3,LAN4\u5e76\u5165\u4e00\u4e2a\u7f51\u6bb5\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u9700\u8981\u5728\u8fd9\u4e09\u4e2a\u63a5\u53e3\u4e4b\u95f4\u505a\u6865\u63a5\uff0c\u751f\u6210\u4e00\u4e2a\u865a\u62df\u7684\u63a5\u53e3\u3002</p>\n<p>\u4e3a\u4e86\u7b80\u5355\u7684\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\uff0c\u6211\u4eec\u5b89\u88c5bridge-utils\u5de5\u5177:</p>\n<div class=\"highlight\"><pre><span></span>apt-get install bridge-utils\n</pre></div>\n\n\n<p>\u7136\u540e\u6211\u4eec\u4fee\u6539/etc/network/interfaces\u6587\u4ef6\u5982\u4e0b\uff1a</p>\n<div class=\"highlight\"><pre><span></span>auto lo\niface lo inet loopback\nauto eth0\nallow-hotplug eth0\niface eth0 inet dhcp\nauto br0\nallow-hotplug br0\niface br0 inet static\n        address 192.168.88.1\n        network 192.168.88.0\n        netmask 255.255.255.0\n        broadcast 192.168.88.255\n        bridge-ports eth1 eth2 eth3\n</pre></div>\n\n\n<ol>\n<li>\u8fd9\u91cc\u7684192.168.88.1\u662f\u8def\u7531\u5668\u672c\u8eab\u5728LAN\u4e2d\u7684\u5730\u5740\uff0c\u4e5f\u4f1a\u662fLAN\u4e2d\u8bbe\u5907\u4ee5\u540e\u7684\u7f51\u5173\u3002</li>\n<li>192.168.88.0\u662f\u7f51\u7edc\u53f7\uff0c\u56e0\u4e3a\u6211\u4eec\u7528\u4e8624\u4f4d\u63a9\u7801\uff0c\u4e5f\u5c31\u662f255.255.255.0\u3002</li>\n<li>192.168.88.255\u662f\u5e7f\u64ad\u5730\u5740\uff0c\u8fd9\u662f\u5e38\u8bc6\uff0c\u4e3b\u673a\u4f4d\u51681\u7684\u5730\u5740\u662f\u5e7f\u64ad\u5730\u5740\u3002</li>\n<li>\u6211\u4eec\u628aeth1 eth2 eth3\uff0c\u4e5f\u5c31\u662fLAN2,LAN3,LAN4 bridge\u6210\u4e3a\u4e00\u4e2a\u65b0\u7684\u63a5\u53e3br0\uff0c\u8ba9\u8fd9\u4e9b\u7aef\u53e3\u5904\u4e8e\u4e00\u4e2a\u7f51\u6bb5\u4e2d\u3002</li>\n<li>auto\u8868\u793a\u901f\u7387\u81ea\u52a8\u534f\u5546\uff0callow-hotplug\u89c1\u5b57\u9762\u610f\u601d\u3002</li>\n<li>lo\u662f\u56de\u73af\u94fe\u8def\uff0c\u7cfb\u7edf\u9ed8\u8ba4\u4e0d\u7528\u4fee\u6539\u3002</li>\n<li>iface eth0 inet dhcp\u8868\u793aeth0\u4e5f\u5c31\u662fLAN1\u6216\u8005\u8bf4\u6211\u4eec\u7684WAN\u7684\u5730\u5740\u662f\u901a\u8fc7DHCP\u83b7\u53d6\u7684\u3002</li>\n</ol>\n<h3>\u4f1f\u5927\u7684Dnsmasq</h3>\n<p>Dnsmasq\u4e0d\u4ec5\u662f\u8def\u7531\u5668\u7ffb\u5899\u7684\u91cd\u5927\u529f\u81e3\uff0c\u4e5f\u662f\u6784\u5efa\u8def\u7531\u5668\u7684\u91cd\u8981\u6cd5\u5b9d\uff0c\u56e0\u4e3a\u4e00\u4e2a\u5c0f\u5de7\u7684dnsmasq\u5c31\u53ef\u4ee5\u5e2e\u6211\u4eec\u5b8c\u6210\u4e24\u9879\u5de5\u4f5c\uff0cDNS-Forwarder\u548cDHCP Server\u3002\u5728\u4f5c\u4e3a\u8def\u7531\u5668\u6765\u7528\u65f6\uff0c\u6211\u4eec\u5148\u4f7f\u7528\u5230\u4e86\u5b83\u7684DHCP Server\u529f\u80fd\uff0c\u76f4\u63a5\u7528apt\u5c31\u53ef\u4ee5\u5b89\u88c5\u597ddnsmasq\u4e86\u3002</p>\n<div class=\"highlight\"><pre><span></span>apt-get install dnsmasq\n</pre></div>\n\n\n<p>\u67e5\u770b\u4e00\u4e0bdnsmasq\u7684\u7248\u672c\u4fe1\u606f:</p>\n<div class=\"highlight\"><pre><span></span>root@debian:~# dnsmasq -v\nDnsmasq version 2.72  Copyright (c) 2000-2014 Simon Kelley\nCompile time options: IPv6 GNU-getopt DBus i18n IDN DHCP DHCPv6 no-Lua TFTP conntrack ipset auth DNSSEC loop-detect\n</pre></div>\n\n\n<p>\u5f88\u597d\uff0c\u6709ipset\u529f\u80fd\u3002\u4e0b\u9762\u6211\u4eec\u4fee\u6539dnsmasq\u7684\u914d\u7f6e\u5982\u4e0b\uff1a</p>\n<div class=\"highlight\"><pre><span></span>root@debian:~# cat /etc/dnsmasq.conf \ninterface=br0\ndhcp-range=192.168.88.10,192.168.88.250,72h\nconf-dir=/etc/dnsmasq.d/\n</pre></div>\n\n\n<ol>\n<li>interface\u4e3abr0\uff0c\u8868\u793a\u8ba9dnsmasq\u76d1\u542cbr0\u4e5f\u5c31\u662f\u6211\u4eec\u7684LAN\u63a5\u53e3\uff0c\u5904\u7406DNS\u548cDHCP\u8bf7\u6c42\u3002</li>\n<li>dhcp-range\u8868\u793a\u4e86\u6211\u4eec\u5141\u8bb8\u5206\u914d\u7684\u5730\u5740\u8303\u56f4\uff0c72h\u8868\u793a\u7eed\u671f\u65f6\u95f4\u4e3a72\u5c0f\u65f6</li>\n<li>conf-dir\u8868\u793a\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u4e5f\u5c06\u4f5c\u4e3adnsmasq\u7684\u914d\u7f6e\u6587\u4ef6\u88ab\u8bfb\u5165\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u5176\u4ed6\u7684\u975e\u8def\u7531\u6838\u5fc3\u529f\u80fd\u7684\u914d\u7f6e\u653e\u5230\u8fd9\u4e2a\u76ee\u5f55\u4e0b</li>\n<li>\u5177\u4f53\u7ed9Dnsmasq\u914d\u7f6e\u54ea\u4e9b\u670d\u52a1\u5668\u7528\u4e8e\u89e3\u51b3DNS\u6c61\u67d3\uff0c\u662f\u7ffb\u5899\u95ee\u9898\u4e0e\u642d\u5efa\u8def\u7531\u65e0\u5173\uff0c\u8fd9\u91cc\u5c31\u4e0d\u8bf4\u4e86\u3002</li>\n</ol>\n<p>/etc/init.d/dnsmasq restart\u91cd\u542fdnsmasq\u670d\u52a1\uff0c\u7136\u540e\u628a\u7535\u8111\u63a5\u5165LAN2~LAN4\u63a5\u53e3\uff0c\u5e94\u8be5\u5c31\u4f1a\u81ea\u52a8\u5206\u914d\u5230IP\u4e86\u3002</p>\n<h3>\u914d\u7f6e\u7cfb\u7edfDNS</h3>\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7cfb\u7edf\u7684dhcp client\u4f1a\u81ea\u52a8\u4ece\u4e0a\u6e38\u83b7\u53d6DNS Server\uff0c\u4f46\u662f\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u56fd\u5185\u7684\u4e0a\u7ea7DNS Server\u90fd\u662f\u88ab\u6c61\u67d3\u7684\uff0c\u9664\u975e\u4f60\u5728\u6211\u5bb6\u5077\u63a5\u8def\u7531\u3002</p>\n<p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e9b\u6280\u672f\u624b\u6bb5\u6765\u8ba9Dnsmasq\u4f7f\u7528\u5e72\u51c0\u7684DNS\u670d\u52a1\u5668\u5e76\u63d0\u4f9b\u7ed9LAN\uff0c\u4f46\u8def\u7531\u5668\u672c\u8eab\u7684DNS\u786e\u662f\u88ab\u6c61\u67d3\u7684\uff0c\u8fd9\u4f1a\u8ba9\u4f60\u5728\u8def\u7531\u5668\u4e0a\u8fdb\u884c\u4e00\u4e9b\u6d89\u53ca\u8054\u7f51\u7684\u64cd\u4f5c\u53d8\u5f97\u5f88\u5947\u8469\uff0c\u6240\u4ee5\u6211\u4eec\u5e0c\u671b\u628a\u8def\u7531\u5668\u672c\u8eab\u7684DNS\u4e5f\u8bbe\u7f6e\u6210Dnsmasq\u7684127.0.0.1\u3002</p>\n<p>\u8fd9\u90e8\u5f88\u7b80\u5355\uff0c\u53ea\u9700\u8981\u7f16\u8f91/etc/dhcp/dhclient.conf\u6587\u4ef6\uff0c\u627e\u5230\uff1a</p>\n<div class=\"highlight\"><pre><span></span>#prepend domain-name-servers 127.0.0.1;\n</pre></div>\n\n\n<p>\u628a\u524d\u9762\u7684\u6ce8\u91ca\u7b26\u53f7\u5220\u6389\uff0c\u8fd9\u6837\u5c31\u4f1a\u9ed8\u8ba4\u5728/etc/resolv.conf\u4e2d\u6dfb\u52a0\u4e00\u4e2a127.0.0.1\u7684DNS\u670d\u52a1\u5668\uff0c\u4e5f\u5c31\u662fDnsmasq\u7684Server\u5730\u5740\u3002</p>\n<p>\u7136\u540e\u627e\u5230\uff1a</p>\n<div class=\"highlight\"><pre><span></span>request subnet-mask, broadcast-address, time-offset, routers,\n        domain-name, domain-name-servers, host-name,\n        netbios-name-servers, netbios-scope, interface-mtu;\n</pre></div>\n\n\n<p>\u628adomain-name-servers\u5220\u6389\uff0c\u8868\u793a\u4e0d\u540cdhcp\u670d\u52a1\u5668\u8bf7\u6c42dns\u670d\u52a1\u5668\u5730\u5740\uff0c\u8fd9\u6837\u4e0b\u6b21WAN\u518d\u8fde\u4e0aDHCP\u7f51\u7edc\uff0c/etc/resolv.conf\u5c31\u53ea\u6709127.0.0.1\u8fd9\u4e00\u4e2aDNS\u670d\u52a1\u5668\u4e86\u3002</p>\n<h3>\u4e0a\u7f51</h3>\n<p>\u55ef\uff0c\u6211\u4eec\u7684\u8def\u7531\u5668\u73b0\u5728\u5df2\u7ecf\u6709\u4e86\u4e00\u4e2aDNS\u670d\u52a1(\u8f6c\u53d1)\u5668\u53ef\u4ee5\u7ed9\u6211\u4eec\u89e3\u6790\u57df\u540d\uff0c\u6709\u4e86DHCP\u670d\u52a1\u5668\u53ef\u4ee5\u7ed9\u6211\u4eec\u5206\u914dIP\uff0c\u751a\u81f3\u8def\u7531\u5668\u672c\u8eab\u4e5f\u4e0d\u7528\u62c5\u5fc3DNS\u6c61\u67d3\u4e86\uff0c\u552f\u4e00\u7684\u95ee\u9898\u662f\uff0c\u6211\u8fde\u4e0a\u8fd9\u4e2a\u8def\u7531\u5668\u540e\u6ca1\u6cd5\u4e0a\u7f51...</p>\n<p>\u8fd9\uff0c\u597d\u5c34\u5c2c\u554a\u3002</p>\n<p>\u5176\u5b9e\u8def\u7531\u5668\u7684\u6838\u5fc3\u529f\u80fd\uff0c\u5c31\u662frouting\uff0c\u4e5f\u5c31\u662f\u7ed9\u8054\u7f51\u8bf7\u6c42\u9009\u62e9\u901a\u8def\u3002\u6211\u4eec\u4eceLAN\u53e3\u63a5\u5165\uff0c\u60f3\u8981\u4e0a\u7f51\u7684\u8bdd\uff0c\u5c31\u5fc5\u987b\u628a\u4eceLAN\u53e3\u63a5\u6536\u5230\u7684\u8bf7\u6c42\u8f6c\u53d1\u5230WAN\u53e3\u4e0a\uff0c\u518d\u628a\u4eceWAN\u53e3\u4e0a\u6536\u5230\u7684\u6570\u636e\u53d1\u56de\u5230LAN\u53e3\uff0c\u8fd9\u4e0d\u662f\u5c31\u662fNAT\u561b\uff0ciptables\u5c31\u53ef\u4ee5\u641e\u5b9a\uff01</p>\n<h4>\u914d\u7f6eIPtables\u8f6c\u53d1</h4>\n<p>\u9996\u5148\u6211\u4eec\u5148\u6e05\u7a7a\u53ef\u80fd\u5b58\u5728\u7684\u4e00\u8d77iptables\u89c4\u5219\uff1a</p>\n<div class=\"highlight\"><pre><span></span>iptables -F\niptables -X\niptables -t nat -F\niptables -t nat -X\niptables -t mangle -F\niptables -t mangle -X\niptables -t raw -F\niptables -t raw -X\n</pre></div>\n\n\n<p>\u7136\u540e\u6dfb\u52a0\u4ee5\u4e0b\u89c4\u5219\uff1a</p>\n<div class=\"highlight\"><pre><span></span>iptables -A FORWARD -i br0 -s 192.168.1.0/255.255.255.0 -j ACCEPT\niptables -A FORWARD -i eth0 -d 192.168.1.0/255.255.255.0 -j ACCEPT\niptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE\n</pre></div>\n\n\n<ol>\n<li>\u524d\u4e24\u6761\u8868\u793a\u63a5\u53d7\u4ecebr0\u548ceth0\u63a5\u53e3\u8f93\u5165\u7684\u6570\u636e</li>\n<li>\u7b2c\u4e09\u6761\u8868\u793a\u628a\u6570\u636e\u6700\u7ec8\u7684POSTROUTING\u5b9a\u5411\u5230eth0\u4e5f\u5c31\u662fWAN\u53e3\u4e0a\uff0c\u4f7f\u7528MASQUERADE\u8f6c\u8bd1\u662f\u4e3a\u4e86\u4fdd\u8bc1NAT\u51fa\u53bb\u7684\u5730\u5740\u662f\u56fa\u5b9a\u7684\u3002</li>\n</ol>\n<h4>\u4f7f\u80fdIPV4\u8f6c\u53d1</h4>\n<p>linux\u7cfb\u7edf\u9ed8\u8ba4\u5e76\u6ca1\u6709\u5f00\u59cbipv4\u548cipv6\u6570\u636e\u7684\u8f6c\u53d1\uff0c\u6240\u4ee5\u4f60\u5149\u914d\u7f6eiptables\u8f6c\u53d1\u662f\u4e0d\u88ab\u652f\u6301\u7684\uff0c\u8fd9\u91cc\u9700\u8981\u7f16\u8f91/etc/sysctl.conf\u6587\u4ef6\uff0c\u627e\u5230:</p>\n<div class=\"highlight\"><pre><span></span>#net.ipv4.conf.default.forwarding=1\n</pre></div>\n\n\n<p>\u628a\u8fd9\u4e2a\u6ce8\u91ca\u7b26\u5220\u6389\u5f00\u542fIPV4\u8f6c\u53d1\uff0c\u4f46\u8fd9\u4e2a\u4fee\u6539\u8981\u91cd\u542f\u540e\u624d\u751f\u6548\uff0c\u5982\u679c\u8981\u7acb\u523b\u751f\u6548\uff0c\u76f4\u63a5\u4f7f\u7528\u4ee5\u4e0b\u7684\u66b4\u529b\u547d\u4ee4:</p>\n<div class=\"highlight\"><pre><span></span>echo 1 &gt; /proc/sys/net/ipv4/ip_forward\n</pre></div>\n\n\n<h4>\u4e00\u4e9b\u9ed8\u8ba4\u7684\u9632\u706b\u5899\u5b89\u5168\u89c4\u5219</h4>\n<p>\u9632\u706b\u5899\u4e0d\u80fd\u6574\u5929\u4e0d\u52a1\u6b63\u4e1a\u53ea\u987e\u7740\u4e0a\u7f51\uff0c\u81f3\u5c11\u5e94\u8be5\u6709\u4e00\u4e9b\u57fa\u672c\u7684\u5b89\u5168\u89c4\u5219\uff0c\u6dfb\u52a0\u5982\u4e0b\u57fa\u672c\u89c4\u5219\uff1a</p>\n<div class=\"highlight\"><pre><span></span>iptables -P INPUT DROP\niptables -P OUTPUT ACCEPT\niptables -P FORWARD DROP\niptables -I INPUT 1 -i lo -j ACCEPT\niptables -I INPUT 1 -i br0 -j ACCEPT\niptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT\n</pre></div>\n\n\n<h4>\u56fa\u5316Iptables\u89c4\u5219</h4>\n<p>\u4f60\u53ef\u4ee5\u7528iptables-save\u548ciptables-restore\u914d\u5408rc.local\u542f\u52a8\u811a\u672c\u6765\u4fdd\u5b58\u6062\u590d\u9632\u706b\u5899\u89c4\u5219\uff0c\u4f46\u5176\u5b9e\u6709\u66f4\u7b80\u5355\u7684\u505a\u6cd5:iptables-persistent\u3002</p>\n<p>\u76f4\u63a5apt-get install iptables-persistent\u5c31\u53ef\u4ee5\u4e86\uff0c\u5728\u5b89\u88c5\u7684\u8fc7\u7a0b\u4e2d\u5c31\u4f1a\u8be2\u95ee\u4f60\u662f\u5426\u4fdd\u5b58\u5f53\u524d\u89c4\u5219\u4e86\uff0c\u800c\u4e14ipv4\u548cipv6\u7684\u90fd\u4f1a\u4fdd\u5b58\uff0c\u867d\u7136\u6211\u4eec\u6ca1\u7528\u5230\u540e\u8005\u3002\u4ee5\u540e\u6bcf\u6b21\u542f\u52a8\u7684\u65f6\u5019iptables-persistent\u90fd\u4f1a\u81ea\u52a8\u5e2e\u6211\u4eec\u52a0\u8f7d\u4fdd\u5b58\u597d\u7684\u89c4\u5219\u3002</p>\n<h2>\u4e0d\u670d\u8dd1\u4e2a\u5206</h2>\n<p>\u5982\u679c\u6211\u4eec\u8d39\u4e86\u8fd9\u4e48\u5927\u5fc3\u601d\u88c5\u597d\u7684\u8def\u7531\u6700\u540e\u7684\u6027\u80fd\u662f\u4e2a\u6e23\u6e23\uff0c\u90a3\u6211\u4eec\u8fd8\u7528\u5b83\u5e72\u5565\u3002\u6240\u4ee5\u6211\u4eec\u6765\u8dd1\u4e2a\u5206\uff0c\u5728\u8def\u7531\u5668\u4e0a\u88c5\u597diperf3\u4e4b\u540e\u5f00\u542fServer\u6a21\u5f0f:</p>\n<div class=\"highlight\"><pre><span></span>iperf -s -p 6000\n</pre></div>\n\n\n<p>\u4ecemacbook\u6d4b\u8bd5\u5230\u8def\u7531\u5668\u7684\u901f\u5ea6\uff1a</p>\n<div class=\"highlight\"><pre><span></span>biqins-MBP:lifetyper.com lifetyper$ iperf3 -c debian -p 6000\nConnecting to host debian, port 6000\n[  6] local 192.168.88.165 port 52954 connected to 192.168.88.1 port 6000\n[ ID] Interval           Transfer     Bandwidth\n[  6]   0.00-1.00   sec   112 MBytes   938 Mbits/sec                  \n[  6]   1.00-2.00   sec   112 MBytes   939 Mbits/sec                  \n[  6]   2.00-3.00   sec   112 MBytes   939 Mbits/sec                  \n[  6]   3.00-4.00   sec   112 MBytes   939 Mbits/sec                  \n[  6]   4.00-5.00   sec   112 MBytes   939 Mbits/sec                  \n[  6]   5.00-6.00   sec   112 MBytes   939 Mbits/sec                  \n[  6]   6.00-7.00   sec   112 MBytes   939 Mbits/sec                  \n[  6]   7.00-8.00   sec   112 MBytes   939 Mbits/sec                  \n[  6]   8.00-9.00   sec   112 MBytes   940 Mbits/sec                  \n[  6]   9.00-10.00  sec   112 MBytes   939 Mbits/sec                  \n- - - - - - - - - - - - - - - - - - - - - - - - -\n[ ID] Interval           Transfer     Bandwidth\n[  6]   0.00-10.00  sec  1.09 GBytes   939 Mbits/sec                  sender\n[  6]   0.00-10.00  sec  1.09 GBytes   939 Mbits/sec                  receiver\n</pre></div>\n\n\n<p>\u4ece\u53e6\u4e00\u4e2aubuntu\u4e3b\u673a\u6d4b\u8bd5\u5230\u8def\u7531\u5668\u7684\u901f\u5ea6:</p>\n<div class=\"highlight\"><pre><span></span>lifetyper@ubuntu:~$ iperf3 -c debian -p 6000\nConnecting to host debian, port 6000\n[  4] local 192.168.88.57 port 50410 connected to 192.168.88.1 port 6000\n[ ID] Interval           Transfer     Bandwidth       Retr  Cwnd\n[  4]   0.00-1.00   sec   107 MBytes   897 Mbits/sec    0    171 KBytes       \n[  4]   1.00-2.00   sec   107 MBytes   896 Mbits/sec    0    188 KBytes       \n[  4]   2.00-3.00   sec   107 MBytes   900 Mbits/sec    0    188 KBytes       \n[  4]   3.00-4.00   sec   107 MBytes   896 Mbits/sec    0    205 KBytes       \n[  4]   4.00-5.00   sec   107 MBytes   898 Mbits/sec    0    205 KBytes       \n[  4]   5.00-6.00   sec   107 MBytes   899 Mbits/sec    0    205 KBytes       \n[  4]   6.00-7.00   sec   107 MBytes   898 Mbits/sec    0    205 KBytes       \n[  4]   7.00-8.00   sec   107 MBytes   901 Mbits/sec    0    205 KBytes       \n[  4]   8.00-9.00   sec   107 MBytes   899 Mbits/sec    0    205 KBytes       \n[  4]   9.00-10.00  sec   107 MBytes   900 Mbits/sec    0    205 KBytes       \n- - - - - - - - - - - - - - - - - - - - - - - - -\n[ ID] Interval           Transfer     Bandwidth       Retr\n[  4]   0.00-10.00  sec  1.05 GBytes   898 Mbits/sec    0             sender\n[  4]   0.00-10.00  sec  1.05 GBytes   898 Mbits/sec                  receiver\n\niperf Done.\n</pre></div>\n\n\n<p>\u7136\u540e\u5728ubuntu\u4e3b\u673a\u5f00\u542fiperf3\u670d\u52a1\u5668\uff0c\u4ecemacbook\u6d4b\u7f51\u5185\u4e24\u673a\u5668\u4e92\u8bbf\u901f\u5ea6:</p>\n<div class=\"highlight\"><pre><span></span>biqins-MBP:lifetyper.com lifetyper$ iperf3 -c ubuntu -p 7000\nConnecting to host ubuntu, port 7000\n[  6] local 192.168.88.165 port 53144 connected to 192.168.88.57 port 7000\n[ ID] Interval           Transfer     Bandwidth\n[  6]   0.00-1.00   sec   105 MBytes   878 Mbits/sec                  \n[  6]   1.00-2.00   sec   104 MBytes   871 Mbits/sec                  \n[  6]   2.00-3.00   sec   104 MBytes   875 Mbits/sec                  \n[  6]   3.00-4.00   sec   105 MBytes   878 Mbits/sec                  \n[  6]   4.00-5.00   sec   105 MBytes   883 Mbits/sec                  \n[  6]   5.00-6.00   sec   106 MBytes   889 Mbits/sec                  \n[  6]   6.00-7.00   sec   104 MBytes   875 Mbits/sec                  \n[  6]   7.00-8.00   sec   106 MBytes   885 Mbits/sec                  \n[  6]   8.00-9.00   sec   106 MBytes   889 Mbits/sec                  \n[  6]   9.00-10.00  sec   106 MBytes   892 Mbits/sec                  \n- - - - - - - - - - - - - - - - - - - - - - - - -\n[ ID] Interval           Transfer     Bandwidth\n[  6]   0.00-10.00  sec  1.03 GBytes   882 Mbits/sec                  sender\n[  6]   0.00-10.00  sec  1.03 GBytes   881 Mbits/sec                  receiver\n\niperf Done.\n</pre></div>\n\n\n<p>\u7f51\u5185\u4e92\u8bbf\u7684\u901f\u5ea6\u80af\u5b9a\u6bd4\u76f4\u63a5\u8fde\u8def\u7531\u6162\u4e00\u70b9\uff0c\u4e0d\u8fc7\u5e73\u5747882Mbps\uff0c\u5728\u7528\u4e0a\u5343\u5146\u7f51\u4e4b\u524d\uff0c\u57fa\u672c\u4e0d\u8981\u5565\u81ea\u884c\u8f66\u4e86\u3002</p>\n<h2>\u8d44\u6e90\u4f7f\u7528\u60c5\u51b5</h2>\n<p>\u6700\u540e\u6765\u770b\u770b\u8fd9\u4e2a\u8def\u7531\u5230\u5e95\u9700\u8981\u591a\u5c11\u8d44\u6e90\uff1a</p>\n<div class=\"highlight\"><pre><span></span>root@debian:/home/lifetyper# df -h\nFilesystem      Size  Used Avail Use% Mounted on\n/dev/sda1        28G  2.0G   25G   8% /\nudev             10M     0   10M   0% /dev\ntmpfs           381M  5.2M  376M   2% /run\ntmpfs           951M     0  951M   0% /dev/shm\ntmpfs           5.0M     0  5.0M   0% /run/lock\ntmpfs           951M     0  951M   0% /sys/fs/cgroup\nroot@debian:/home/lifetyper# free -m\n             total       used       free     shared    buffers     cached\nMem:          1900        139       1761          5         10         52\n-/+ buffers/cache:         76       1824\nSwap:         1285          0       1285\n</pre></div>\n\n\n<p>2G\u7684\u78c1\u76d8\uff0c139M\u7684\u5185\u5b58\uff0cCPU\u5360\u7528\u4e0a\u6211\u7528top\u770b\uff0c\u6700\u9ad8\u7684CPU\u5360\u7528\u7a0b\u5e8f\u5c31\u662ftop\u672c\u8eab\u3002\u6211\u672c\u6765\u4ee5\u4e3a\u78c1\u76d8\u5360\u7528\u4f1a\u633a\u591a\u7684\uff0c\u6ca1\u60f3\u5230\u5728\u5b89\u88c5\u5b8c\u5168\u90e8\u7ec4\u4ef6\uff0c\u5e76\u4e14\u628ashadowsocks\u7f16\u8bd1\u73af\u5883\u90fd\u642d\u5b8c\u4e4b\u540e\u4e5f\u624d2G\uff0c\u96be\u602a\u4e4b\u524d\u522b\u4eba\u7528edgerouter lite 2G\u7684U\u76d8\u5c31\u53ef\u4ee5\u76f4\u63a5\u5728\u8def\u7531\u4e0a\u7f16\u8bd1\u8f6f\u4ef6\u5305\u4e86\u3002</p>\n<h3>\u4e00\u4e9b\u5c0f\u8d34\u58eb(\u4e0d\u5b9a\u671f\u66f4\u65b0)</h3>\n<h4>\u7ed9\u8def\u7531\u5668\u4e00\u4e2a\u540d\u5b57</h4>\n<p>\u5982\u679c\u4f60\u4e0d\u60f3\u6bcf\u6b21ssh\u5230\u8def\u7531\u7684\u65f6\u5019\u90fd\u8f93\u4e00\u4e32ip\uff0c\u5176\u5b9e\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u7ed9\u8def\u7531\u5668\u4e00\u4e2a\u540d\u79f0\uff0c\u76f4\u63a5\u901a\u8fc7\u4e3b\u673a\u540d\u6765\u8bbf\u95ee\u5b83\u3002\n\u8fd9\u4e2a\u5f88\u7b80\u5355\uff0c\u76f4\u63a5\u4fee\u6539/etc/hosts\u6587\u4ef6\u5c31\u53ef\u4ee5\u4e86\uff0c\u56e0\u4e3adnsmasq\u662f\u4f1a\u4ece\u8fd9\u91cc\u8bfb\u53d6\u4e3b\u673a\u540d\u7684\uff0c\u8bfb\u53d6\u4e4b\u540e\u4e3b\u673a\u540d\u5bf9\u4e8ednsmasq\u6765\u8bf4\u5c31\u50cfLAN\u91cc\u7684\u4e3b\u673a\u4e00\u6837\u662f\u53ef\u4ee5\u76f4\u63a5\u89e3\u6790\u7684\uff0c\u6211\u4eec\u5728/etc/hosts\u4e2d\u6dfb\u52a0:</p>\n<div class=\"highlight\"><pre><span></span>192.168.88.1        debian\n</pre></div>\n\n\n<p>\u91cd\u542fdnsmasq\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u7c7b\u4f3cssh user@debian\u7684\u65b9\u5f0f\u767b\u5f55\u8def\u7531\u4e86\u3002</p>\n<h4>\u6dfb\u52a0\u7528\u6237\u5230sudo\u7ec4</h4>\n<p>\u9ed8\u8ba4\u65b0\u5efa\u7684\u975eroot\u7528\u6237\u6743\u9650\u5f88\u4f4e\uff0c\u5b89\u88c5\u4e86sudo\u4e4b\u540e\u4e5f\u56e0\u4e3a\u9ed8\u8ba4\u4e0d\u5728sudo\u7ec4\u5185\u6240\u4ee5\u4e0d\u80fd\u4f7f\u7528sudo\u547d\u4ee4\uff0c\u89e3\u51b3\u65b9\u6cd5\u5c31\u662f\u5148\u7528root\u767b\u5f55\uff0c\u7136\u540e\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a</p>\n<div class=\"highlight\"><pre><span></span>apt-get install sudo\nadduser your_user_name sudo\n</pre></div>\n\n\n<p>\u9000\u51fa\u4e4b\u540e\u518d\u7528\u521a\u624d\u6dfb\u52a0\u7684\u7528\u6237\u540d\u767b\u5f55\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528sudo\u4e86\uff0c\u5982\u679c\u6709\u592a\u591asudo\u547d\u4ee4\u8981\u505a\uff0c\u76f4\u63a5<code>sudo bash</code>\u5c31\u53ef\u4ee5\u5207\u5230root\u7528\u6237\u4e86\u3002</p>", "description": "\u81ea\u4ece\u5f53\u5e74\u88abAutoddVPN\u9879\u76ee\u5e26\u5165\u8def\u7531\u5668\u7ffb\u5899\u7684\u5751\uff0c\u65ad\u65ad\u7eed\u7eed\u4e70\u8fc7\u7684\u8def\u7531\u5668\u6709\u5dee\u4e0d\u591a\u4e8c\u5341\u6765\u4e2a\u4e86\u3002\u4ece\u6700\u4f4e\u7aef\u7684400Mhz\u5355\u6838\u7684Atheros\u82af\u7247\u5230\u53cc\u68381G\u7684\u9ad8\u7aef\u8def\u7531\uff0c\u4ece\u5c0f\u5230\u53ea\u6709\u706b\u67f4\u76d2\u5927\u5c0f\u7684WT-32020\u5230\u6bd4\u7816\u5934\u8fd8\u5927\u7684R7000\uff0c\u57fa\u672c\u90fd\u73a9\u4e86\u4e2a\u904d,\u4f46\u4e5f\u90fd\u5f88\u65e0\u804a\uff0c\u56e0\u4e3a\u6700\u7ec8\u90fd\u662f\u5237openwrt\u6216\u8005dd-wrt\uff0c\u540e\u8005\u7684\u53ef\u73a9\u6027\u5176\u5b9e\u8fd8\u66f4\u5dee...", "date_published": "2017-04-02T14:59:49+08:00"}, {"id": "tag:None,2017-03-03:posts/blog_initial.html", "url": "posts/blog_initial.html", "title": "Initial", "content_html": "<p>\u56e0\u4e3a\u5b9e\u5728\u4e0d\u77e5\u9053\u600e\u4e48\u7ed9\u8fd9\u4e2a\u573a\u666f\u53d6\u6807\u9898\u4e86\uff0c\u4e5f\u4e0d\u8bb0\u5f97\u662f\u8fd9\u91cc\u7b2c\u51e0\u6b21\u81ea\u6740\u540e\u91cd\u751f\u4e86\u3002</p>\n<p>\u6ca1\u6709\u4e22\u6570\u636e\uff0c\u4e5f\u6ca1\u6709\u4efb\u4f55\u5176\u4ed6\u7684\u95ee\u9898\uff0c\u53ea\u662f\u5ffd\u7136\u89c9\u5f97\u4e00\u4e2ablog\u8981\u914d\u7f6ephp\uff0c\u8981\u914d\u7f6emysql\uff0c\u8981\u914d\u7f6enginx\u6765\u652f\u6301\u5b9e\u5728\u592a\u591a\u4f59\u3002\u6211\u60f3\u8981\u4e00\u4e2a\u53ef\u4ee5\u968f\u4fbf\u627e\u5757\u78c1\u76d8\u5c31\u53ef\u4ee5\u5b8c\u6574\u5907\u4efd\u5168\u7ad9\uff0c\u968f\u4fbf\u627e\u4e2a\u7a7a\u95f4\u4e0a\u4f20\u4e00\u4e0b\u5c31\u53ef\u4ee5\u91cd\u65b0\u90e8\u7f72\u7684\u7cfb\u7edf\uff0c\u4e00\u4e2a\u50cflatex\u4e00\u6837\u5408\u7406\u7684\u53d7\u4ee3\u7801\u7cbe\u51c6\u63a7\u5236\u683c\u5f0f\u7684\u64b0\u5199\u8bed\u8a00\uff0c\u53e6\u5916\u6211\u8981\u770b\u5f97\u61c2\u4ed6\u4eec\u7cfb\u7edf\u7684\u8bed\u8a00\uff0c\u6240\u4ee5\u662f<a href=\"https://blog.getpelican.com/\">pelican</a>\u3002</p>\n<p>\u6628\u5929\u770b\u4e86\u4e00\u4e0b\u624d\u53d1\u73b0lifetyper.com\u8fd9\u4e2a\u57df\u540d\u7adf\u7136\u6ce8\u518c\u4e86\u5feb10\u5e74\u4e86,\u5c31\u8fde\u57df\u540d\u7684\u7075\u611f\u6765\u6e90lifetype.net\u90fd\u63a5\u8fd1\u534a\u6b7b\u72b6\u6001\u4e86\uff0c\u8bba\u575b\u5f88\u591a\u677f\u5757\u591a\u5e74\u6ca1\u4eba\u53d1\u8a00\uff0c\u6709\u4e5f\u5c31\u662f\u4e00\u4e24\u5e74\u5076\u5c14\u6709\u4eba\u5192\u4e2a\u6ce1\u3002</p>\n<p>\u81f3\u4e8e\u7528lifetype\u7684\u4eba\uff0chipeople\u8df3\u8f6c\u5230\u4e86\u5c0f\u7a0b\u5e8f\uff0c\u79cb\u6708\u767d\u4e0d\u77e5\u9053\u6bd5\u4e1a\u540e\u5728\u5e72\u5565\uff0cwinman\u4e5f\u4e0d\u5728<a href=\"http://forum.lifetype.org.cn/\">lifetype\u4e2d\u6587\u8bba\u575b</a>\u4e0a\u7ebf\u597d\u4e45\u597d\u4e45\u4e86\u3002</p>\n<p>Vick\u4e0d\u77e5\u9053\u662f\u5426\u8fd8\u6709\u7a7a\u6253\u6e38\u620f\uff0c\u6768\u5eb7\u4e0d\u77e5\u9053\u4e00\u5e74\u56de\u51e0\u6b21\u56fd\uff0cYee\u5728\u6211\u8111\u5b50\u91cc\u8fd8\u662f\u90a3\u5f20\u5e74\u8f7b\u7684\u8138\uff0c\u867d\u7136\u5b9e\u9645\u4e0a\u5e94\u8be5\u548c\u6211\u4e00\u6837\u5dee\u4e0d\u591a\u5230\u4e86\u800c\u7acb\u4e4b\u5e74\uff0c\u6653\u6167\u59d0\uff0c\u6211\u771f\u7684\u5e94\u8be5\u627e\u4e2a\u65f6\u95f4\u53bb\u559d\u676f\u5496\u5561\uff0c\u867d\u7136\u6211\u559d\u4e86\u5496\u5561\u5c31\u72af\u56f0\u3002</p>\n<p>\u8fd8\u6709\u4e9b\u4eba\uff0c\u6211\u8fde\u540d\u5b57\u751a\u81f3ID\u90fd\u4e0d\u8bb0\u5f97\u4e86\u3002</p>\n<p>blog\u66fe\u7ecf\u662f\u4e2a\u90a3\u4e48\u706b\u7684\u4e1c\u897f\uff0c\u73b0\u5728\u5374\u8ba9\u4eba\u4e00\u5ea6\u6000\u7591\u4e2a\u4eba\u662f\u5426\u771f\u7684\u6709\u5199blog\u8868\u8fbe\u81ea\u6211\u7684\u9700\u6c42\uff0c\u66fe\u7ecf\u90a3\u4e9b\u51e0\u767e\u4e07\u6ce8\u518c\u91cf\u7684\u535a\u5ba2\u7f51\u7ad9\u53ef\u662fweb2.0\u65f6\u4ee3\u6700\u5927\u7684\u5185\u5bb9\u5236\u9020\u8005\u5462\u3002\u73b0\u5728\uff0c\u5047\u7684\u8ba9\u6211\u6000\u7591\u81ea\u5df1\u7ecf\u5386\u7684\u662f\u4e2a\u68a6\uff0c\u7eb5\u7136\u623f\u4ef7\u5728\u5341\u5e74\u5185\u6da8\u4e865678\u500d\u4e5f\u6ca1\u8ba9\u6211\u6709\u8fd9\u6837\u7684\u611f\u53d7\u3002</p>\n<p>\u6211\u4eec\u5230\u5e95\u8981\u5199\u4ec0\u4e48\u5462\uff1f</p>\n<p>\u5199\u65e5\u8bb0\uff1f\u771f\u7684\u4f1a\u6709\u4eba\u559c\u6b22\u516c\u5f00\u81ea\u5df1\u7684\u9690\u79c1\u5417\uff0c\u6216\u8005\u8bf4\uff0c\u8c01\u4f1a\u5728\u4e4e\u4f60\u7684\u9690\u79c1\uff0c\u9664\u4e86\u4f60\u7684\u6697\u604b\u8005\u3002\u4f5c\u4e3a\u5bb6\u5ead\u7684\u8bb0\u5f55\u4e5f\u8bb8\u662f\u4e0d\u9519\u7684\uff0c\u4f46\u4f60\u5199\u4e86\u51e0\u767e\u4e2a\u5b57\u53ef\u80fd\u662f\u4e3a\u4e86\u8d34\u51fa\u4e00\u5f20\u7167\u7247\u6216\u8005\u4e00\u6bb5\u89c6\u9891\uff0cblog\u5c31\u662f\u4e2a\u811a\u6ce8\u3002\u6240\u4ee5\uff0c\u53ef\u80fd\u7b49\u4f60\u8001\u4e86\u60f3\u5199\u56de\u5fc6\u5f55\u5374\u53c8\u6ca1\u6709\u4efb\u4f55\u5a92\u4f53\u7684\u65f6\u5019\uff0cblog\u624d\u6709\u70b9\u7528\uff0c\u5c31\u5f53\u662f\u5199\u672c\u4e66\u597d\u4e86\u3002</p>\n<p>\u5199\u6280\u672f\u6587\u7ae0\uff1f\u6211\u65e9\u5c31\u4e0d\u4f1a\u5e72\u5168\u6587\u590d\u5236\u8fd9\u79cd\u52fe\u5f53\u4e86\uff0c\u4f46\u5199\u7684\u65e0\u975e\u4e5f\u5c31\u662f\u4ece\u7f51\u4e0a\u83b7\u5f97\u7684\u522b\u4eba\u7684\u77e5\u8bc6\u7ecf\u8fc7\u6211\u6d88\u5316\u4e4b\u540e\u7684\u4ea7\u7269\uff0c\u539f\u59cb\u5185\u5bb9\u7684\u751f\u4ea7\u6709\u5374\u5f88\u5c11\u3002\u725b\u5f88\u4e86\u4e0d\u8d77\uff0c\u5403\u7684\u662f\u8349\u6324\u7684\u662f\u5976\uff0c\u4f46\u5982\u679c\u8fde\u8349\u90fd\u6ca1\u6709\u5462\uff1f\u6316\u7164\u4e5f\u5f88\u4e0d\u9519\uff0c\u4f46\u5982\u679c\u8fde\u4ea7\u751f\u7164\u77ff\u7684\u8fdc\u53e4\u6811\u6728\u90fd\u6ca1\u6709\u5462\uff1f</p>\n<p>\u53ea\u6709\u592a\u9633\u662f\u4f1f\u5927\u7684\u3002\u5927\u90e8\u5206blogger\u6d3b\u5728\u4e00\u4e2a\u201c\u6211\u5199\u4e1c\u897f\u4f1a\u6709\u4eba\u770b\uff0c\u4f1a\u5bf9\u793e\u4f1a\u4e3b\u4e49\u56db\u4e2a\u73b0\u4ee3\u5316\u5efa\u8bbe\u4f5c\u51fa\u4f1f\u5927\u8d21\u732e\u201d\u7684\u5e7b\u89c9\u4e2d\u3002\u5982\u679c\u4fdd\u6301\u8fd9\u79cd\u5e7b\u89c9\uff0c\u6211\u53ef\u4ee5\u5047\u88c5\u6210\u4e00\u4e2a\u601d\u60f3\u5bb6\u5728\u8fd9\u91cc\u53e8\u53e8\u3002</p>\n<p>\u628a\u65e0\u5e8f\u7684\u6587\u5b57\u7ec4\u7ec7\u8d77\u6765\u5199\u6210\u6587\u7ae0\uff0c\u662f\u4e00\u79cd\u8ba9\u71b5\u51cf\u5c0f\u7684\u505a\u6cd5\uff0c\u800c\u6211\u8fd9\u6b21\u7684\u4f5c\u4e3a\uff0c\u5230\u5e95\u8fd8\u662f\u7b26\u5408\u4e86\u5b87\u5b99\u7684\u71b5\u4e0d\u65ad\u65e0\u9650\u589e\u5927\u7684\u5b9a\u52bf\uff0c\u6211\u5f00\u59cb\u7406\u89e3\u6211\u670b\u53cb\u7b2c\u4e00\u6b21\u770b\u5230\u71b5\u589e\u539f\u7406\u65f6\u7684\u90a3\u79cd\u4f24\u611f\u3002</p>\n<p>\u4eba\u7c7b\u867d\u7136\u53ef\u4ee5\u901a\u8fc7\u81ea\u5df1\u7684\u52aa\u529b\u5728\u5c0f\u8303\u56f4\u5185\u4e0d\u65ad\u7684\u51cf\u5c0f\u71b5\u503c\uff0c\u6784\u5efa\u7f8e\u5999\u7684\u4ea7\u7269\uff0c\u4f46\u8fd9\u4e9b\u4ea7\u7269\u6700\u7ec8\u8fd8\u662f\u4f1a\u6d88\u4ea1\uff0c\u9003\u90fd\u9003\u4e0d\u6389\uff0c\u751a\u81f3\u4e8e\u6587\u7ae0\u8fd9\u6837\u5bf9\u5b9e\u4f53\u4f9d\u8d56\u6781\u5c0f\u7684\u4e1c\u897f\u4e5f\u4e0d\u80fd\u5e78\u514d\u3002</p>\n<p>\u6309\u9999\u519c\u7684\u8bf4\u6cd5\uff0c\u8d8a\u5c11\u7684\u3001\u5b58\u5728\u6982\u7387\u8d8a\u4f4e\u7684\u4e1c\u897f\u4fe1\u606f\u91cf\u8d8a\u5927\uff0c\u4f46\u5bf9\u4e8e\u4fe1\u606f\u800c\u8a00\uff0c\u526f\u672c\u8d8a\u5c11\u8d8a\u4e0d\u5b89\u5168\uff0c\u6240\u4ee5\u4eba\u7c7b\u51fa\u4e8e\u5bf9\u73cd\u8d35\u4fe1\u606f\u4fdd\u62a4\u7684\u672c\u80fd\u4f1a\u53bb\u590d\u5236\u7c98\u8d34\u4f18\u79c0\u7684\u6587\u7ae0\uff0c\u7531\u6b64\u53ef\u8bc1\uff0c\u5982\u679c\u6211\u7684\u6587\u7ae0\u5728\u5176\u4ed6\u5730\u65b9\u90fd\u627e\u4e0d\u5230\u526f\u672c\uff0c\u90a3\u4e5f\u6ca1\u4ec0\u4e48\u5b58\u5728\u7684\u5fc5\u8981\u3002</p>\n<p>\u4f60\u8bf4\u5462\uff1f\u8c26\u76ca\u3002</p>", "description": "\u56e0\u4e3a\u5b9e\u5728\u4e0d\u77e5\u9053\u600e\u4e48\u7ed9\u8fd9\u4e2a\u573a\u666f\u53d6\u6807\u9898\u4e86\uff0c\u4e5f\u4e0d\u8bb0\u5f97\u662f\u8fd9\u91cc\u7b2c\u51e0\u6b21\u81ea\u6740\u540e\u91cd\u751f\u4e86\u3002\u6ca1\u6709\u4e22\u6570\u636e\uff0c\u4e5f\u6ca1\u6709\u4efb\u4f55\u5176\u4ed6\u7684\u95ee\u9898\uff0c\u53ea\u662f\u5ffd\u7136\u89c9\u5f97\u4e00\u4e2ablog\u8981\u914d\u7f6ephp\uff0c\u8981\u914d\u7f6emysql\uff0c\u8981\u914d\u7f6enginx\u6765\u652f\u6301\u5b9e\u5728\u592a\u591a\u4f59\u3002\u6211\u60f3\u8981\u4e00\u4e2a\u53ef\u4ee5\u968f\u4fbf\u627e\u5757\u78c1\u76d8\u5c31\u53ef\u4ee5\u5b8c\u6574\u5907\u4efd\u5168\u7ad9\uff0c\u968f\u4fbf\u627e\u4e2a\u7a7a\u95f4\u4e0a\u4f20\u4e00\u4e0b\u5c31\u53ef\u4ee5\u91cd\u65b0\u90e8\u7f72\u7684\u7cfb\u7edf\uff0c\u4e00\u4e2a\u50cflatex\u4e00\u6837\u5408\u7406\u7684\u53d7\u4ee3\u7801\u7cbe\u51c6\u63a7\u5236\u683c\u5f0f\u7684\u64b0\u5199\u8bed\u8a00\uff0c\u53e6\u5916\u6211\u8981\u770b\u5f97\u61c2\u4ed6\u4eec\u7cfb\u7edf\u7684\u8bed\u8a00\uff0c\u6240\u4ee5\u662fpelican...", "date_published": "2017-03-03T14:32:12+08:00"}], "home_page_url": "/", "feed_url": "feeds.json", "favicon": "favicon.png", "author": {"name": "\u6bd5\u52e4"}}